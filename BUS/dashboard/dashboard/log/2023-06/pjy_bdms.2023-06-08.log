2023-06-08 08:06:52.681 INFO  [Catalina-utility-2] [c.pjy.dashboard.listener.SessionListener] - updateUserCloseTime p00139 
2023-06-08 08:06:52.684 INFO  [Catalina-utility-2] [c.pjy.dashboard.listener.SessionListener] - currentSessionUserList ->  false
2023-06-08 08:06:52.684 INFO  [Catalina-utility-2] [c.pjy.dashboard.listener.SessionListener] - updateUserCloseTime p00139 
2023-06-08 08:06:52.685 INFO  [Catalina-utility-2] [c.pjy.dashboard.listener.SessionListener] - currentSessionUserList ->  false
2023-06-08 08:06:52.761 INFO  [UserConnection-2] [com.pjy.dashboard.service.ChatService] - # sise thread stop # 사용자접속정보 없음
2023-06-08 08:06:52.761 INFO  [UserConnection-2] [com.pjy.dashboard.service.ChatService] - ## thread end sise . UserConnection-2[80]
2023-06-08 08:07:02.860 WARN  [H2 housekeeper] [com.zaxxer.hikari.pool.HikariPool] - H2 - Thread starvation or clock leap detected (housekeeper delta=7h57m50s672ms631µs).
2023-06-08 08:08:09.682 INFO  [http-nio-10010-exec-2] [c.p.d.interceptor.LoggerInterceptor] - ============================== START ==============================
2023-06-08 08:08:09.683 INFO  [http-nio-10010-exec-2] [c.p.d.interceptor.LoggerInterceptor] -  Class       	:  class org.springframework.web.method.HandlerMethod
2023-06-08 08:08:09.683 INFO  [http-nio-10010-exec-2] [c.p.d.interceptor.LoggerInterceptor] -  Request URI 	:  /
2023-06-08 08:08:09.683 INFO  [http-nio-10010-exec-2] [c.p.d.interceptor.LoggerInterceptor] -  Request addr	:  0:0:0:0:0:0:0:1
2023-06-08 08:08:09.683 INFO  [http-nio-10010-exec-2] [c.p.d.interceptor.LoggerInterceptor] -  Servlet URI 	:  /
2023-06-08 08:08:09.690 ERROR [http-nio-10010-exec-2] [o.a.c.c.C.[Tomcat].[localhost].[/].[jsp]] - Servlet.service() for servlet [jsp] threw exception
java.lang.IllegalStateException: Cannot create a session after the response has been committed
	at org.apache.catalina.connector.Request.doGetSession(Request.java:2993)
	at org.apache.catalina.connector.Request.getSession(Request.java:2432)
	at org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:908)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:244)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:582)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:527)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at org.apache.jasper.runtime.PageContextImpl.initialize(PageContextImpl.java:133)
	at org.apache.jasper.runtime.JspFactoryImpl.internalGetPageContext(JspFactoryImpl.java:109)
	at org.apache.jasper.runtime.JspFactoryImpl.getPageContext(JspFactoryImpl.java:60)
	at org.apache.jsp.WEB_002dINF.jsp.home_jsp._jspService(home_jsp.java:121)
	at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:477)
	at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:385)
	at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:329)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:712)
	at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:580)
	at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:516)
	at org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequestDispatcher.include(HeaderWriterFilter.java:149)
	at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:163)
	at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:317)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1372)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1118)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1057)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.servlet.resource.ResourceUrlEncodingFilter.doFilter(ResourceUrlEncodingFilter.java:64)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.boot.actuate.web.trace.servlet.HttpTraceFilter.doFilterInternal(HttpTraceFilter.java:88)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:155)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:97)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:74)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.security.web.FilterChainProxy$$FastClassBySpringCGLIB$$f101c706.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at com.pjy.dashboard.aop.LogAspect.handleRequestRejectedException(LogAspect.java:147)
	at jdk.internal.reflect.GeneratedMethodAccessor148.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
	at org.springframework.security.web.FilterChainProxy$$EnhancerBySpringCGLIB$$ba862d4b.doFilter(<generated>)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:114)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:104)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:526)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1591)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
2023-06-08 08:08:09.692 ERROR [http-nio-10010-exec-2] [o.a.c.c.C.[.[.[/].[dispatcherServlet]] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [javax.servlet.ServletException: java.lang.IllegalStateException: Cannot create a session after the response has been committed] with root cause
java.lang.IllegalStateException: Cannot create a session after the response has been committed
	at org.apache.catalina.connector.Request.doGetSession(Request.java:2993)
	at org.apache.catalina.connector.Request.getSession(Request.java:2432)
	at org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:908)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:244)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:582)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:527)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at org.apache.jasper.runtime.PageContextImpl.initialize(PageContextImpl.java:133)
	at org.apache.jasper.runtime.JspFactoryImpl.internalGetPageContext(JspFactoryImpl.java:109)
	at org.apache.jasper.runtime.JspFactoryImpl.getPageContext(JspFactoryImpl.java:60)
	at org.apache.jsp.WEB_002dINF.jsp.home_jsp._jspService(home_jsp.java:121)
	at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:477)
	at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:385)
	at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:329)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:712)
	at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:580)
	at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:516)
	at org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequestDispatcher.include(HeaderWriterFilter.java:149)
	at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:163)
	at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:317)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1372)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1118)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1057)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.servlet.resource.ResourceUrlEncodingFilter.doFilter(ResourceUrlEncodingFilter.java:64)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.boot.actuate.web.trace.servlet.HttpTraceFilter.doFilterInternal(HttpTraceFilter.java:88)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:155)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:97)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:74)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.security.web.FilterChainProxy$$FastClassBySpringCGLIB$$f101c706.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at com.pjy.dashboard.aop.LogAspect.handleRequestRejectedException(LogAspect.java:147)
	at jdk.internal.reflect.GeneratedMethodAccessor148.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
	at org.springframework.security.web.FilterChainProxy$$EnhancerBySpringCGLIB$$ba862d4b.doFilter(<generated>)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:114)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:104)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:526)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1591)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
2023-06-08 08:08:09.694 INFO  [http-nio-10010-exec-2] [c.p.d.interceptor.LoggerInterceptor] - ============================== START ==============================
2023-06-08 08:08:09.695 INFO  [http-nio-10010-exec-2] [c.p.d.interceptor.LoggerInterceptor] -  Class       	:  class org.springframework.web.method.HandlerMethod
2023-06-08 08:08:09.695 INFO  [http-nio-10010-exec-2] [c.p.d.interceptor.LoggerInterceptor] -  Request URI 	:  /error
2023-06-08 08:08:09.695 INFO  [http-nio-10010-exec-2] [c.p.d.interceptor.LoggerInterceptor] -  Request addr	:  0:0:0:0:0:0:0:1
2023-06-08 08:08:09.695 INFO  [http-nio-10010-exec-2] [c.p.d.interceptor.LoggerInterceptor] -  Servlet URI 	:  /error
2023-06-08 08:08:09.806 ERROR [http-nio-10010-exec-2] [o.a.c.c.C.[Tomcat].[localhost].[/].[jsp]] - Servlet.service() for servlet [jsp] threw exception
java.lang.IllegalStateException: Cannot create a session after the response has been committed
	at org.apache.catalina.connector.Request.doGetSession(Request.java:2993)
	at org.apache.catalina.connector.Request.getSession(Request.java:2432)
	at org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:908)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:244)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:582)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:244)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:582)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:527)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at org.apache.jasper.runtime.PageContextImpl.initialize(PageContextImpl.java:133)
	at org.apache.jasper.runtime.JspFactoryImpl.internalGetPageContext(JspFactoryImpl.java:109)
	at org.apache.jasper.runtime.JspFactoryImpl.getPageContext(JspFactoryImpl.java:60)
	at org.apache.jsp.WEB_002dINF.jsp.error_jsp._jspService(error_jsp.java:107)
	at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:477)
	at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:385)
	at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:329)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:712)
	at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:580)
	at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:516)
	at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:163)
	at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:317)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1372)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1118)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1057)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.servlet.resource.ResourceUrlEncodingFilter.doFilter(ResourceUrlEncodingFilter.java:64)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:84)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:155)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.security.web.FilterChainProxy$$FastClassBySpringCGLIB$$f101c706.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at com.pjy.dashboard.aop.LogAspect.handleRequestRejectedException(LogAspect.java:147)
	at jdk.internal.reflect.GeneratedMethodAccessor148.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
	at org.springframework.security.web.FilterChainProxy$$EnhancerBySpringCGLIB$$ba862d4b.doFilter(<generated>)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:712)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:461)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:384)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:312)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:394)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:253)
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:348)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:173)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1591)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
2023-06-08 08:08:09.807 ERROR [http-nio-10010-exec-2] [o.a.c.c.C.[.[.[/].[dispatcherServlet]] - Servlet.service() for servlet [dispatcherServlet] threw exception
java.lang.IllegalStateException: Cannot create a session after the response has been committed
	at org.apache.catalina.connector.Request.doGetSession(Request.java:2993)
	at org.apache.catalina.connector.Request.getSession(Request.java:2432)
	at org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:908)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:244)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:582)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:244)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:582)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:527)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at org.apache.jasper.runtime.PageContextImpl.initialize(PageContextImpl.java:133)
	at org.apache.jasper.runtime.JspFactoryImpl.internalGetPageContext(JspFactoryImpl.java:109)
	at org.apache.jasper.runtime.JspFactoryImpl.getPageContext(JspFactoryImpl.java:60)
	at org.apache.jsp.WEB_002dINF.jsp.error_jsp._jspService(error_jsp.java:107)
	at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:477)
	at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:385)
	at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:329)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:712)
	at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:580)
	at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:516)
	at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:163)
	at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:317)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1372)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1118)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1057)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.servlet.resource.ResourceUrlEncodingFilter.doFilter(ResourceUrlEncodingFilter.java:64)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:84)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:155)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.security.web.FilterChainProxy$$FastClassBySpringCGLIB$$f101c706.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at com.pjy.dashboard.aop.LogAspect.handleRequestRejectedException(LogAspect.java:147)
	at jdk.internal.reflect.GeneratedMethodAccessor148.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
	at org.springframework.security.web.FilterChainProxy$$EnhancerBySpringCGLIB$$ba862d4b.doFilter(<generated>)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:712)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:461)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:384)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:312)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:394)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:253)
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:348)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:173)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1591)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
2023-06-08 08:08:09.808 ERROR [http-nio-10010-exec-2] [o.a.c.c.C.[Tomcat].[localhost]] - Exception Processing ErrorPage[errorCode=0, location=/error]
org.apache.jasper.JasperException: javax.servlet.ServletException: java.lang.IllegalStateException: Cannot create a session after the response has been committed
	at org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:639)
	at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:500)
	at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:385)
	at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:329)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:712)
	at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:580)
	at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:516)
	at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:163)
	at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:317)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1372)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1118)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1057)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.servlet.resource.ResourceUrlEncodingFilter.doFilter(ResourceUrlEncodingFilter.java:64)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:84)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:155)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.security.web.FilterChainProxy$$FastClassBySpringCGLIB$$f101c706.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at com.pjy.dashboard.aop.LogAspect.handleRequestRejectedException(LogAspect.java:147)
	at jdk.internal.reflect.GeneratedMethodAccessor148.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
	at org.springframework.security.web.FilterChainProxy$$EnhancerBySpringCGLIB$$ba862d4b.doFilter(<generated>)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:712)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:461)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:384)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:312)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:394)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:253)
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:348)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:173)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1591)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: javax.servlet.ServletException: java.lang.IllegalStateException: Cannot create a session after the response has been committed
	at org.apache.jsp.WEB_002dINF.jsp.error_jsp._jspService(error_jsp.java:144)
	at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:477)
	... 97 common frames omitted
Caused by: java.lang.IllegalStateException: Cannot create a session after the response has been committed
	at org.apache.catalina.connector.Request.doGetSession(Request.java:2993)
	at org.apache.catalina.connector.Request.getSession(Request.java:2432)
	at org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:908)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:244)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:582)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:244)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:582)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:527)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at org.apache.jasper.runtime.PageContextImpl.initialize(PageContextImpl.java:133)
	at org.apache.jasper.runtime.JspFactoryImpl.internalGetPageContext(JspFactoryImpl.java:109)
	at org.apache.jasper.runtime.JspFactoryImpl.getPageContext(JspFactoryImpl.java:60)
	at org.apache.jsp.WEB_002dINF.jsp.error_jsp._jspService(error_jsp.java:107)
	... 100 common frames omitted
2023-06-08 08:08:11.951 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.MemberServiceImpl] - ROLE_ADMIN
2023-06-08 08:08:12.009 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.MemberServiceImpl] - pass:$2a$10$fzROicoPqFgIXdBJiw7KXuOij7MFasEO5QPPdmlcspnMvkhI4wUzK,$2a$10$DioyijFvcAPFi03iw0R/weWrRq.5TVaqt5yk/5E1KXpfz3Lfq0nj6
2023-06-08 08:08:12.068 INFO  [http-nio-10010-exec-3] [c.p.d.configuration.SecurityConfig] - authentication:: p00139
2023-06-08 08:08:12.069 INFO  [UserConnection-3] [com.pjy.dashboard.service.ChatService] - # sise thread start : [p00139]
2023-06-08 08:08:12.069 INFO  [UserConnection-3] [com.pjy.dashboard.service.ChatService] - # sise threaditemList = null 
2023-06-08 08:09:32.910 INFO  [http-nio-10010-exec-3] [c.pjy.dashboard.controller.JspController] - C: 회원정보수정 GET의 아이디 p00139
2023-06-08 08:16:05.564 INFO  [http-nio-10010-exec-5] [c.pjy.dashboard.controller.JspController] - C: 회원정보수정 GET의 아이디 p00139
2023-06-08 08:16:33.529 INFO  [http-nio-10010-exec-5] [c.pjy.dashboard.controller.JspController] - C: 회원정보수정 GET의 아이디 p00139
2023-06-08 08:25:02.716 INFO  [restartedMain] [com.pjy.dashboard.PjyApplication] - Starting PjyApplication on DESKTOP-3O1I9JM with PID 34520 (C:\BUS\multimodule-parent\dashboard\target\classes started by admin in C:\BUS\multimodule-parent\dashboard)
2023-06-08 08:25:02.720 INFO  [restartedMain] [com.pjy.dashboard.PjyApplication] - The following profiles are active: oauth
2023-06-08 08:25:02.758 INFO  [restartedMain] [o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor] - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-06-08 08:25:02.759 INFO  [restartedMain] [o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor] - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-06-08 08:25:03.588 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode!
2023-06-08 08:25:03.588 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-08 08:25:03.684 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 91ms. Found 2 JPA repository interfaces.
2023-06-08 08:25:03.936 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode!
2023-06-08 08:25:03.936 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2023-06-08 08:25:03.976 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationExtensionSupport] - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.pjy.dashboard.core.dao.jpa.h2.MemberRepository. If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2023-06-08 08:25:03.977 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationExtensionSupport] - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.pjy.dashboard.core.dao.jpa.h2.RememberMeRepository. If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2023-06-08 08:25:03.977 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 41ms. Found 0 JDBC repository interfaces.
2023-06-08 08:25:04.278 INFO  [restartedMain] [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] - Post-processing PropertySource instances
2023-06-08 08:25:04.326 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2023-06-08 08:25:04.326 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource commandLineArgs [org.springframework.core.env.SimpleCommandLinePropertySource] to EncryptableEnumerablePropertySourceWrapper
2023-06-08 08:25:04.326 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource servletConfigInitParams [org.springframework.core.env.PropertySource$StubPropertySource] to EncryptablePropertySourceWrapper
2023-06-08 08:25:04.326 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource servletContextInitParams [org.springframework.core.env.PropertySource$StubPropertySource] to EncryptablePropertySourceWrapper
2023-06-08 08:25:04.326 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2023-06-08 08:25:04.327 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableSystemEnvironmentPropertySourceWrapper
2023-06-08 08:25:04.327 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2023-06-08 08:25:04.327 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource applicationConfig: [classpath:/application-oauth.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2023-06-08 08:25:04.327 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2023-06-08 08:25:04.327 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource devtools [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2023-06-08 08:25:04.327 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource class path resource [pjy.properties] [org.springframework.core.env.CompositePropertySource] to EncryptableEnumerablePropertySourceWrapper
2023-06-08 08:25:04.327 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource class path resource [common.properties] [org.springframework.core.io.support.ResourcePropertySource] to EncryptableMapPropertySourceWrapper
2023-06-08 08:25:04.372 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'asyncConfiguration' of type [com.pjy.dashboard.configuration.AsyncConfiguration$$EnhancerBySpringCGLIB$$3a67742] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 08:25:04.408 INFO  [restartedMain] [c.u.j.filter.DefaultLazyPropertyFilter] - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2023-06-08 08:25:04.468 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration$$EnhancerBySpringCGLIB$$ed9cdb6f] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 08:25:04.533 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 08:25:04.534 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@697f95b' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 08:25:04.537 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration$$EnhancerBySpringCGLIB$$12717e21] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 08:25:04.542 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'org.springframework.security.config.annotation.method.configuration.Jsr250MetadataSourceConfiguration' of type [org.springframework.security.config.annotation.method.configuration.Jsr250MetadataSourceConfiguration$$EnhancerBySpringCGLIB$$37c69637] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 08:25:04.545 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'jsr250MethodSecurityMetadataSource' of type [org.springframework.security.access.annotation.Jsr250MethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 08:25:04.546 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 08:25:04.558 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$54ef1335] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 08:25:04.577 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'org.springframework.hateoas.config.HateoasConfiguration' of type [org.springframework.hateoas.config.HateoasConfiguration$$EnhancerBySpringCGLIB$$d46f6067] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 08:25:04.663 INFO  [restartedMain] [c.u.j.r.DefaultLazyPropertyResolver] - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2023-06-08 08:25:04.665 INFO  [restartedMain] [c.u.j.d.DefaultLazyPropertyDetector] - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2023-06-08 08:25:04.965 INFO  [restartedMain] [o.s.b.w.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 10010 (http)
2023-06-08 08:25:04.979 INFO  [restartedMain] [o.apache.coyote.http11.Http11NioProtocol] - Initializing ProtocolHandler ["http-nio-10010"]
2023-06-08 08:25:04.986 INFO  [restartedMain] [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2023-06-08 08:25:04.986 INFO  [restartedMain] [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.29]
2023-06-08 08:25:05.198 INFO  [restartedMain] [org.apache.jasper.servlet.TldScanner] - At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.
2023-06-08 08:25:05.205 INFO  [restartedMain] [o.a.c.c.C.[Tomcat].[localhost].[/]] - Initializing Spring embedded WebApplicationContext
2023-06-08 08:25:05.205 INFO  [restartedMain] [o.s.web.context.ContextLoader] - Root WebApplicationContext: initialization completed in 2446 ms
2023-06-08 08:25:05.718 INFO  [restartedMain] [c.u.j.encryptor.DefaultLazyEncryptor] - Found Custom Encryptor Bean org.jasypt.encryption.pbe.PooledPBEStringEncryptor@420957bc with name: jasyptStringEncryptor
2023-06-08 08:25:05.751 INFO  [restartedMain] [com.zaxxer.hikari.HikariDataSource] - H2 - Starting...
2023-06-08 08:25:05.814 INFO  [restartedMain] [com.zaxxer.hikari.HikariDataSource] - H2 - Start completed.
2023-06-08 08:25:06.260 INFO  [restartedMain] [com.pjy.dashboard.filter.TestFilter] - init Pjy Filter
2023-06-08 08:25:06.523 INFO  [restartedMain] [o.hibernate.jpa.internal.util.LogHelper] - HHH000204: Processing PersistenceUnitInfo [
	name: default
	...]
2023-06-08 08:25:06.604 INFO  [restartedMain] [org.hibernate.Version] - HHH000412: Hibernate Core {5.3.14.Final}
2023-06-08 08:25:06.606 INFO  [restartedMain] [org.hibernate.cfg.Environment] - HHH000206: hibernate.properties not found
2023-06-08 08:25:06.750 INFO  [restartedMain] [org.hibernate.annotations.common.Version] - HCANN000001: Hibernate Commons Annotations {5.0.4.Final}
2023-06-08 08:25:06.940 INFO  [restartedMain] [org.hibernate.dialect.Dialect] - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-06-08 08:25:07.515 INFO  [restartedMain] [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-08 08:25:07.699 INFO  [restartedMain] [o.h.h.i.QueryTranslatorFactoryInitiator] - HHH000397: Using ASTQueryTranslatorFactory
2023-06-08 08:25:07.899 INFO  [restartedMain] [o.s.s.concurrent.ThreadPoolTaskExecutor] - Initializing ExecutorService 'clientInboundChannelExecutor'
2023-06-08 08:25:07.909 INFO  [restartedMain] [o.s.s.concurrent.ThreadPoolTaskExecutor] - Initializing ExecutorService 'clientOutboundChannelExecutor'
2023-06-08 08:25:08.536 INFO  [restartedMain] [o.s.s.concurrent.ThreadPoolTaskExecutor] - Initializing ExecutorService
2023-06-08 08:25:08.536 INFO  [restartedMain] [o.s.s.concurrent.ThreadPoolTaskExecutor] - Initializing ExecutorService 'asyncThreadPool'
2023-06-08 08:25:08.670 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/h2-console/**'], []
2023-06-08 08:25:08.670 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/css/**'], []
2023-06-08 08:25:08.670 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/js/**'], []
2023-06-08 08:25:08.670 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/monitor/**'], []
2023-06-08 08:25:08.670 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/img/**'], []
2023-06-08 08:25:08.670 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/lib/**'], []
2023-06-08 08:25:08.670 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/main.css'], []
2023-06-08 08:25:08.670 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/common.js'], []
2023-06-08 08:25:08.670 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/resources/**'], []
2023-06-08 08:25:08.775 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7f5fe387, org.springframework.security.web.context.SecurityContextPersistenceFilter@2a805edc, org.springframework.security.web.header.HeaderWriterFilter@1498d0fb, org.springframework.web.filter.CorsFilter@406e1e76, org.springframework.security.web.authentication.logout.LogoutFilter@2618b75d, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@38844254, org.springframework.security.web.session.ConcurrentSessionFilter@6b3b4e44, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@4a255e7c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7e89725d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@68a6cbb8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@440f42f9, org.springframework.security.web.session.SessionManagementFilter@74ef9ba2, org.springframework.security.web.access.ExceptionTranslationFilter@fabb3fa, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3420c917]
2023-06-08 08:25:08.792 INFO  [restartedMain] [o.s.aop.framework.CglibAopProxy] - Unable to proxy interface-implementing method [public final void org.springframework.web.filter.GenericFilterBean.init(javax.servlet.FilterConfig) throws javax.servlet.ServletException] because it is marked as final: Consider using interface-based JDK proxies instead!
2023-06-08 08:25:08.821 INFO  [restartedMain] [o.s.s.concurrent.ThreadPoolTaskScheduler] - Initializing ExecutorService 'messageBrokerTaskScheduler'
2023-06-08 08:25:08.862 INFO  [restartedMain] [o.s.s.concurrent.ThreadPoolTaskExecutor] - Initializing ExecutorService 'brokerChannelExecutor'
2023-06-08 08:25:09.147 WARN  [restartedMain] [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration$JpaWebMvcConfiguration] - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-08 08:25:09.200 INFO  [restartedMain] [o.s.b.a.w.s.WelcomePageHandlerMapping] - Adding welcome page: ServletContext resource [/index.html]
2023-06-08 08:25:10.073 INFO  [restartedMain] [o.s.b.d.a.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2023-06-08 08:25:10.092 INFO  [restartedMain] [o.s.b.a.e.web.EndpointLinksResolver] - Exposing 16 endpoint(s) beneath base path '/actuator'
2023-06-08 08:25:10.182 INFO  [restartedMain] [o.s.m.s.b.SimpleBrokerMessageHandler] - Starting...
2023-06-08 08:25:10.182 INFO  [restartedMain] [o.s.m.s.b.SimpleBrokerMessageHandler] - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [DefaultSubscriptionRegistry[cache[0 destination(s)], registry[0 sessions]]]]
2023-06-08 08:25:10.183 INFO  [restartedMain] [o.s.m.s.b.SimpleBrokerMessageHandler] - Started.
2023-06-08 08:25:10.190 INFO  [restartedMain] [o.s.s.concurrent.ThreadPoolTaskScheduler] - Initializing ExecutorService
2023-06-08 08:25:10.192 INFO  [restartedMain] [o.apache.coyote.http11.Http11NioProtocol] - Starting ProtocolHandler ["http-nio-10010"]
2023-06-08 08:25:10.227 INFO  [restartedMain] [o.s.b.w.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 10010 (http) with context path ''
2023-06-08 08:25:10.230 INFO  [restartedMain] [com.pjy.dashboard.PjyApplication] - Started PjyApplication in 7.823 seconds (JVM running for 8.626)
2023-06-08 08:25:10.230 INFO  [restartedMain] [com.pjy.dashboard.AppStartedListener] - =====================
2023-06-08 08:25:10.230 INFO  [restartedMain] [com.pjy.dashboard.AppStartedListener] - Application started
2023-06-08 08:25:10.230 INFO  [restartedMain] [com.pjy.dashboard.AppStartedListener] - =====================
2023-06-08 08:25:11.226 INFO  [RMI TCP Connection(9)-127.0.0.1] [o.a.c.c.C.[Tomcat].[localhost].[/]] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-08 08:25:11.226 INFO  [RMI TCP Connection(9)-127.0.0.1] [o.s.web.servlet.DispatcherServlet] - Initializing Servlet 'dispatcherServlet'
2023-06-08 08:25:11.240 INFO  [RMI TCP Connection(9)-127.0.0.1] [o.s.web.servlet.DispatcherServlet] - Completed initialization in 12 ms
2023-06-08 08:26:08.867 INFO  [MessageBroker-1] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2023-06-08 08:27:01.482 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.MemberServiceImpl] - ROLE_ADMIN
2023-06-08 08:27:01.542 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.MemberServiceImpl] - pass:$2a$10$/RdODvhrAmHCJZcmxqQkBOz/UX9JIWh5qhBfO/re9QLh6YkkYaJGS,$2a$10$AnYE/HY8Q.mLNU4yFzptd.YGvDTwwb6.LwrXH7ij3DqWP2f5bVIA.
2023-06-08 08:27:01.602 INFO  [http-nio-10010-exec-9] [c.p.d.configuration.SecurityConfig] - exception:: Bad credentials
2023-06-08 08:27:11.743 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.MemberServiceImpl] - ROLE_ADMIN
2023-06-08 08:27:11.811 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.MemberServiceImpl] - pass:$2a$10$/RdODvhrAmHCJZcmxqQkBOz/UX9JIWh5qhBfO/re9QLh6YkkYaJGS,$2a$10$t2tmx1kxCQGUR47SfwdkveBbOTyaKawyQB4PxvLon7GrM1Sq0Hx3u
2023-06-08 08:27:11.873 INFO  [http-nio-10010-exec-7] [c.p.d.configuration.SecurityConfig] - exception:: Bad credentials
2023-06-08 08:27:15.688 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.MemberServiceImpl] - ROLE_ADMIN
2023-06-08 08:27:15.749 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.MemberServiceImpl] - pass:$2a$10$/RdODvhrAmHCJZcmxqQkBOz/UX9JIWh5qhBfO/re9QLh6YkkYaJGS,$2a$10$2kFIlHXx/cCQOUafrhbOsu5LRaLKOpyBfA.gguIi4VS8F1qiilqbW
2023-06-08 08:27:15.809 INFO  [http-nio-10010-exec-5] [c.p.d.configuration.SecurityConfig] - exception:: Bad credentials
2023-06-08 08:27:23.118 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.MemberServiceImpl] - ROLE_ADMIN
2023-06-08 08:27:23.178 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.MemberServiceImpl] - pass:$2a$10$/RdODvhrAmHCJZcmxqQkBOz/UX9JIWh5qhBfO/re9QLh6YkkYaJGS,$2a$10$3AxmDlHxrQAxWOOZ241pOuc7UCJUYaW/riMDu43.vZq.ZNg9nbL0a
2023-06-08 08:27:23.238 INFO  [http-nio-10010-exec-1] [c.p.d.configuration.SecurityConfig] - authentication:: p00139
2023-06-08 08:27:23.257 INFO  [UserConnection-1] [com.pjy.dashboard.service.ChatService] - # sise thread start : [p00139]
2023-06-08 08:27:23.257 INFO  [UserConnection-1] [com.pjy.dashboard.service.ChatService] - # sise threaditemList = null 
2023-06-08 08:27:26.887 INFO  [http-nio-10010-exec-7] [c.pjy.dashboard.controller.JspController] - C: 회원정보수정 GET의 아이디 p00139
2023-06-08 08:31:08.834 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.MemberServiceImpl] - ROLE_ADMIN
2023-06-08 08:31:08.896 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.MemberServiceImpl] - pass:$2a$10$uGgr6d/oQ0IB4cmZ4zT89e79iOVtey1pT2JzCEbsfmBG2jQFPFaDq,$2a$10$6VLjTs4BxGFQ.Cdbjyl4gOTI5HCSvUl3ool3ahQcyCCmBNigpBRsa
2023-06-08 08:31:08.956 INFO  [http-nio-10010-exec-9] [c.p.d.configuration.SecurityConfig] - authentication:: p00139
2023-06-08 08:31:11.173 INFO  [http-nio-10010-exec-2] [c.pjy.dashboard.controller.JspController] - C: 회원정보수정 GET의 아이디 p00139
2023-06-08 08:32:46.500 INFO  [http-nio-10010-exec-9] [c.p.d.configuration.SecurityConfig] - addLogoutHandler:logout: 
2023-06-08 08:32:46.500 INFO  [http-nio-10010-exec-9] [c.pjy.dashboard.listener.SessionListener] - updateUserCloseTime p00139 
2023-06-08 08:32:46.501 INFO  [http-nio-10010-exec-9] [c.pjy.dashboard.listener.SessionListener] - currentSessionUserList ->  true
2023-06-08 08:32:46.501 INFO  [http-nio-10010-exec-9] [c.pjy.dashboard.listener.SessionListener] - currentSessionUserList -> userId p00139 
2023-06-08 08:32:46.501 INFO  [http-nio-10010-exec-9] [c.pjy.dashboard.listener.SessionListener] - updateUserCloseTime p00139 
2023-06-08 08:32:46.501 INFO  [http-nio-10010-exec-9] [c.pjy.dashboard.listener.SessionListener] - currentSessionUserList ->  true
2023-06-08 08:32:46.501 INFO  [http-nio-10010-exec-9] [c.pjy.dashboard.listener.SessionListener] - currentSessionUserList -> userId p00139 
2023-06-08 08:32:46.501 INFO  [http-nio-10010-exec-9] [c.p.d.configuration.SecurityConfig] - logoutSuccessHandler:onLogoutSuccess: 
2023-06-08 08:32:52.462 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.MemberServiceImpl] - ROLE_ADMIN
2023-06-08 08:32:52.522 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.MemberServiceImpl] - pass:$2a$10$uGgr6d/oQ0IB4cmZ4zT89e79iOVtey1pT2JzCEbsfmBG2jQFPFaDq,$2a$10$.IvcCFRjHaqJKcTOXnvHNOmd6NCiTg7XkC.EpTX.mBjwETGhQT1MG
2023-06-08 08:32:52.582 INFO  [http-nio-10010-exec-5] [c.p.d.configuration.SecurityConfig] - authentication:: p00139
2023-06-08 08:33:13.633 INFO  [http-nio-10010-exec-1] [c.pjy.dashboard.controller.JspController] - C: 회원정보수정 GET의 아이디 p00139
2023-06-08 08:39:50.459 INFO  [http-nio-10010-exec-8] [c.pjy.dashboard.controller.JspController] - C: 회원정보수정 GET의 아이디 p00139
2023-06-08 08:40:06.951 INFO  [http-nio-10010-exec-8] [c.pjy.dashboard.controller.JspController] - C: 회원정보수정 GET의 아이디 p00139
2023-06-08 08:40:20.406 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.MemberServiceImpl] - ROLE_ADMIN
2023-06-08 08:40:20.466 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.MemberServiceImpl] - pass:$2a$10$0xO38jdlO9w3oCFMFy85n.nLLPSlRoC4D.ViItFZN3CGRma/WLg1m,$2a$10$N0RMzjeH9qEJqgyFGQYeEe4uc.4hFlkb8zkCubmzQAod2cRR.biXW
2023-06-08 08:40:20.525 INFO  [http-nio-10010-exec-7] [c.p.d.configuration.SecurityConfig] - exception:: Bad credentials
2023-06-08 08:40:26.690 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.MemberServiceImpl] - ROLE_ADMIN
2023-06-08 08:40:26.749 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.MemberServiceImpl] - pass:$2a$10$0xO38jdlO9w3oCFMFy85n.nLLPSlRoC4D.ViItFZN3CGRma/WLg1m,$2a$10$eODJcvpsa8VH1FWYqN3ZAuST1VEwP9HXs3Kv1rUeW0qererwJ8Tsa
2023-06-08 08:40:26.809 INFO  [http-nio-10010-exec-8] [c.p.d.configuration.SecurityConfig] - authentication:: p00139
2023-06-08 08:40:31.544 INFO  [http-nio-10010-exec-10] [c.pjy.dashboard.controller.JspController] - C: 회원정보수정 GET의 아이디 p00139
2023-06-08 08:40:57.877 INFO  [http-nio-10010-exec-10] [c.pjy.dashboard.controller.JspController] - C: 회원정보수정 GET의 아이디 p00139
2023-06-08 08:48:20.460 INFO  [http-nio-10010-exec-5] [c.pjy.dashboard.controller.JspController] - C: 회원정보수정 GET의 아이디 p00139
2023-06-08 08:55:04.342 ERROR [http-nio-10010-exec-3] [c.p.d.core.error.GlobalExceptionHandler] - handleEntityNotFoundException
java.lang.NullPointerException: Cannot invoke "java.lang.CharSequence.toString()" because "rawPassword" is null
	at org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder.encode(BCryptPasswordEncoder.java:80)
	at com.pjy.dashboard.controller.JspController.modifyPassword(JspController.java:140)
	at com.pjy.dashboard.controller.JspController$$FastClassBySpringCGLIB$$aa5607.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:685)
	at com.pjy.dashboard.controller.JspController$$EnhancerBySpringCGLIB$$70856758.modifyPassword(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:893)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:798)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.servlet.resource.ResourceUrlEncodingFilter.doFilter(ResourceUrlEncodingFilter.java:64)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.boot.actuate.web.trace.servlet.HttpTraceFilter.doFilterInternal(HttpTraceFilter.java:88)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:155)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:97)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:74)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.security.web.FilterChainProxy$$FastClassBySpringCGLIB$$f101c706.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at com.pjy.dashboard.aop.LogAspect.handleRequestRejectedException(LogAspect.java:147)
	at jdk.internal.reflect.GeneratedMethodAccessor149.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
	at org.springframework.security.web.FilterChainProxy$$EnhancerBySpringCGLIB$$8af80e28.doFilter(<generated>)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:114)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:104)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:526)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1591)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
2023-06-08 08:55:04.368 WARN  [http-nio-10010-exec-3] [o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver] - Resolved [java.lang.NullPointerException: Cannot invoke "java.lang.CharSequence.toString()" because "rawPassword" is null]
2023-06-08 08:56:08.868 INFO  [MessageBroker-1] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 2, active threads = 1, queued tasks = 0, completed tasks = 1]
2023-06-08 08:56:20.429 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 08:56:25.412 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 08:56:26.755 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 08:56:26.764 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 08:56:26.764 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 08:56:26.767 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 08:56:27.133 INFO  [http-nio-10010-exec-10] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 08:56:27.133 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 08:56:27.165 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 08:56:46.874 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 08:59:08.464 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 08:59:10.664 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 08:59:12.220 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 08:59:12.226 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 08:59:12.226 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 08:59:12.228 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 08:59:12.562 INFO  [http-nio-10010-exec-10] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 08:59:12.562 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 08:59:12.590 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:00:09.941 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:00:12.579 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:00:14.459 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 09:00:14.463 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 09:00:14.463 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 09:00:14.464 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 09:00:14.782 INFO  [http-nio-10010-exec-7] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 09:00:14.782 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 09:00:14.810 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:09:51.772 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:09:56.674 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:09:57.896 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 09:09:57.900 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 09:09:57.900 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 09:09:57.901 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 09:09:58.228 INFO  [http-nio-10010-exec-6] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 09:09:58.229 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 09:09:58.257 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:11:24.341 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:11:27.020 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:11:28.172 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 09:11:28.175 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 09:11:28.175 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 09:11:28.177 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 09:11:28.536 INFO  [http-nio-10010-exec-2] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 09:11:28.536 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 09:11:28.565 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:11:40.227 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:11:42.644 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:11:43.714 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 09:11:43.717 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 09:11:43.718 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 09:11:43.719 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 09:11:44.055 INFO  [http-nio-10010-exec-2] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 09:11:44.055 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 09:11:44.084 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:13:39.851 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:13:42.072 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:13:43.481 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 09:13:43.484 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 09:13:43.484 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 09:13:43.485 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 09:13:43.868 INFO  [http-nio-10010-exec-10] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 09:13:43.868 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 09:13:43.905 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:14:57.897 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:15:00.080 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:15:01.066 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 09:15:01.070 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 09:15:01.070 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 09:15:01.071 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 09:15:01.489 INFO  [http-nio-10010-exec-1] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 09:15:01.489 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 09:15:01.518 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:18:17.893 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:18:19.952 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:18:20.942 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 09:18:20.946 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 09:18:20.947 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 09:18:20.948 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 09:18:21.319 INFO  [http-nio-10010-exec-9] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 09:18:21.319 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 09:18:21.349 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:19:33.843 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:19:36.584 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:19:37.994 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 09:19:37.997 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 09:19:37.998 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 09:19:37.999 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 09:19:38.350 INFO  [http-nio-10010-exec-10] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 09:19:38.350 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 09:19:38.376 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:22:06.596 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:22:08.925 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:22:10.166 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 09:22:10.172 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 09:22:10.173 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 09:22:10.174 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 09:22:10.534 INFO  [http-nio-10010-exec-1] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 09:22:10.534 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 09:22:10.563 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:23:47.770 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:23:49.190 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:23:55.215 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:23:56.181 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 09:23:56.185 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 09:23:56.185 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 09:23:56.186 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 09:23:56.527 INFO  [http-nio-10010-exec-10] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 09:23:56.527 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 09:23:56.558 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:24:40.245 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:24:41.766 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:24:48.226 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:24:49.270 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 09:24:49.273 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 09:24:49.274 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 09:24:49.275 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 09:24:49.619 INFO  [http-nio-10010-exec-8] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 09:24:49.619 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 09:24:49.654 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:26:08.866 INFO  [MessageBroker-2] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 3, active threads = 1, queued tasks = 0, completed tasks = 2]
2023-06-08 09:26:20.710 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:26:23.348 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:26:24.734 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 09:26:24.738 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 09:26:24.738 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 09:26:24.739 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 09:26:25.123 INFO  [http-nio-10010-exec-9] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 09:26:25.124 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 09:26:25.152 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:29:06.738 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:29:08.832 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:29:11.431 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:29:12.605 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 09:29:12.611 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 09:29:12.611 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 09:29:12.613 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 09:29:12.923 INFO  [http-nio-10010-exec-3] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 09:29:12.923 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 09:29:12.951 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:33:36.762 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:33:39.376 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:33:40.696 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 09:33:40.699 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 09:33:40.700 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 09:33:40.701 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 09:33:41.013 INFO  [http-nio-10010-exec-5] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 09:33:41.013 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 09:33:41.040 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:34:40.918 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.MemberServiceImpl] - ROLE_ADMIN
2023-06-08 09:34:40.977 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.MemberServiceImpl] - pass:$2a$10$MNrQAPw.4k9j2y08eTmYEeI7oKPuaWbA97HHog.8PYep5HsRwhbae,$2a$10$FfHKFFHnuTfg9CAClkl8leZR.uohVHmAiLuss9yYJ8T7QlYC290Sm
2023-06-08 09:34:41.038 INFO  [http-nio-10010-exec-4] [c.p.d.configuration.SecurityConfig] - exception:: Bad credentials
2023-06-08 09:34:41.939 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.MemberServiceImpl] - ROLE_ADMIN
2023-06-08 09:34:41.999 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.MemberServiceImpl] - pass:$2a$10$MNrQAPw.4k9j2y08eTmYEeI7oKPuaWbA97HHog.8PYep5HsRwhbae,$2a$10$4iZFB9Oh/A8eyj4ctctSE.1VJT/5ddD1jqmN9nDCs.70yYrwyR7r.
2023-06-08 09:34:42.060 INFO  [http-nio-10010-exec-6] [c.p.d.configuration.SecurityConfig] - exception:: Bad credentials
2023-06-08 09:34:46.089 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.MemberServiceImpl] - ROLE_ADMIN
2023-06-08 09:34:46.150 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.MemberServiceImpl] - pass:$2a$10$MNrQAPw.4k9j2y08eTmYEeI7oKPuaWbA97HHog.8PYep5HsRwhbae,$2a$10$mvkELEpGm7wEopFKFT960OdjGWTd.rJ8bn5kzFkUd5t5Ar11qb8GS
2023-06-08 09:34:46.210 INFO  [http-nio-10010-exec-3] [c.p.d.configuration.SecurityConfig] - authentication:: p00139
2023-06-08 09:34:51.007 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:34:53.505 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:34:54.567 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 09:34:54.570 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 09:34:54.570 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 09:34:54.571 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 09:34:54.893 INFO  [http-nio-10010-exec-3] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 09:34:54.893 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 09:34:54.917 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:36:45.084 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:36:47.117 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:36:48.328 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 09:36:48.331 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 09:36:48.331 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 09:36:48.332 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 09:36:48.716 INFO  [http-nio-10010-exec-3] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 09:36:48.716 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 09:36:48.746 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:38:52.318 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:38:54.785 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:38:55.603 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 09:38:55.606 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 09:38:55.606 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 09:38:55.607 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 09:38:55.982 INFO  [http-nio-10010-exec-8] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 09:38:55.982 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 09:38:56.013 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:39:53.267 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:39:55.786 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:39:56.755 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 09:39:56.784 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 09:39:56.784 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 09:39:56.786 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 09:39:57.174 INFO  [http-nio-10010-exec-1] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 09:39:57.174 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 09:39:57.214 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:42:36.920 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:42:39.094 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:42:40.439 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 09:42:40.444 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 09:42:40.444 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 09:42:40.446 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 09:42:40.841 INFO  [http-nio-10010-exec-7] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 09:42:40.841 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 09:42:40.874 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:43:52.546 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:43:54.528 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:43:55.842 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 09:43:55.846 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 09:43:55.847 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 09:43:55.848 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 09:43:56.234 INFO  [http-nio-10010-exec-6] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 09:43:56.234 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 09:43:56.266 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:46:18.622 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:46:20.660 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:46:21.566 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 09:46:21.570 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 09:46:21.570 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 09:46:21.571 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 09:46:21.962 INFO  [http-nio-10010-exec-3] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 09:46:21.962 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 09:46:21.990 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:49:21.971 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:49:26.690 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:49:27.783 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 09:49:27.786 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 09:49:27.786 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 09:49:27.788 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 09:49:28.104 INFO  [http-nio-10010-exec-10] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 09:49:28.104 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 09:49:28.130 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:53:51.869 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:53:55.864 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:53:56.905 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 09:53:56.908 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 09:53:56.909 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 09:53:56.911 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 09:53:57.261 INFO  [http-nio-10010-exec-9] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 09:53:57.262 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 09:53:57.289 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:54:20.827 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:54:23.847 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:54:24.908 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 09:54:24.912 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 09:54:24.912 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 09:54:24.913 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 09:54:25.304 INFO  [http-nio-10010-exec-9] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 09:54:25.304 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 09:54:25.337 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:56:08.875 INFO  [MessageBroker-1] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 4, active threads = 1, queued tasks = 0, completed tasks = 3]
2023-06-08 09:58:15.830 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:58:20.448 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:58:21.367 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 09:58:21.370 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 09:58:21.370 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 09:58:21.372 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 09:58:21.699 INFO  [http-nio-10010-exec-3] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 09:58:21.699 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 09:58:21.725 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:59:14.614 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:59:18.059 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:59:19.335 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 09:59:19.339 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 09:59:19.339 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 09:59:19.340 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 09:59:19.662 INFO  [http-nio-10010-exec-3] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 09:59:19.663 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 09:59:19.689 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:59:39.767 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 09:59:42.929 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 09:59:44.005 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 09:59:44.008 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 09:59:44.009 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 09:59:44.010 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 09:59:44.369 INFO  [http-nio-10010-exec-3] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 09:59:44.370 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 09:59:44.396 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:01:01.639 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 10:01:04.141 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:01:05.602 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:01:05.605 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:01:05.606 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:01:05.607 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:01:05.925 INFO  [http-nio-10010-exec-6] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 10:01:05.925 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 10:01:05.951 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:03:32.284 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 10:03:35.129 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:03:37.168 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:03:37.172 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:03:37.173 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:03:37.174 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:03:37.494 INFO  [http-nio-10010-exec-9] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 10:03:37.494 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 10:03:37.520 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:04:44.299 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 10:04:46.875 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:04:49.441 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:04:49.444 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:04:49.445 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:04:49.446 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:04:49.772 INFO  [http-nio-10010-exec-10] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 10:04:49.772 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 10:04:49.800 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:05:27.859 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 10:06:16.151 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 10:06:18.948 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:06:19.777 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:06:19.780 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:06:19.780 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:06:19.781 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:06:20.106 INFO  [http-nio-10010-exec-7] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 10:06:20.106 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 10:06:20.132 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:11:22.681 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 10:11:25.221 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:11:26.411 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:11:26.415 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:11:26.415 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:11:26.417 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:11:26.743 INFO  [http-nio-10010-exec-8] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 10:11:26.743 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 10:11:26.769 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:11:46.590 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 10:11:48.990 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:11:50.152 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:11:50.155 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:11:50.156 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:11:50.157 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:11:50.534 INFO  [http-nio-10010-exec-10] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 10:11:50.534 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 10:11:50.561 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:16:31.497 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 10:16:33.891 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:16:35.754 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:16:35.758 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:16:35.759 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:16:35.760 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:16:36.083 INFO  [http-nio-10010-exec-3] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 10:16:36.083 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 10:16:36.109 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:20:18.567 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 10:20:20.818 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:20:21.890 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:20:21.894 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:20:21.894 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:20:21.895 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:20:22.216 INFO  [http-nio-10010-exec-8] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 10:20:22.216 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 10:20:22.242 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:20:51.811 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 10:20:54.579 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:20:55.702 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:20:55.705 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:20:55.706 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:20:55.707 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:20:56.099 INFO  [http-nio-10010-exec-4] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 10:20:56.099 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 10:20:56.132 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:21:23.793 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 10:21:26.869 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:21:28.083 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:21:28.106 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:21:28.106 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:21:28.107 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:21:28.449 INFO  [http-nio-10010-exec-4] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 10:21:28.450 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 10:21:28.479 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:26:08.863 INFO  [MessageBroker-3] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 5, active threads = 1, queued tasks = 0, completed tasks = 4]
2023-06-08 10:28:17.986 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 10:28:20.018 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:28:21.008 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:28:21.011 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:28:21.011 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:28:21.012 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:28:21.388 INFO  [http-nio-10010-exec-5] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 10:28:21.388 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 10:28:21.417 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:28:42.776 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 10:28:48.296 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:28:49.191 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:28:49.195 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:28:49.196 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:28:49.197 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:28:49.549 INFO  [http-nio-10010-exec-5] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 10:28:49.549 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 10:28:49.577 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:28:50.672 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:28:50.676 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:28:50.676 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:28:50.678 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:28:51.057 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:29:15.941 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 10:29:18.435 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:29:19.340 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:29:19.343 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:29:19.344 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:29:19.345 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:29:19.751 INFO  [http-nio-10010-exec-4] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 10:29:19.751 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 10:29:19.780 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:29:58.113 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 10:30:02.218 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:30:03.232 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:30:03.235 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:30:03.236 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:30:03.237 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:30:03.607 INFO  [http-nio-10010-exec-4] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 10:30:03.607 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 10:30:03.640 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:30:10.278 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 10:30:54.683 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 10:30:57.997 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-04' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:31:05.452 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:31:08.855 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:31:08.858 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:31:08.858 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:31:08.859 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:31:09.201 INFO  [http-nio-10010-exec-5] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 10:31:09.201 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 10:31:09.224 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:31:19.091 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 10:31:31.362 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 10:31:34.469 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:31:35.900 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:31:35.903 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:31:35.904 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:31:35.905 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:31:36.239 INFO  [http-nio-10010-exec-2] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 10:31:36.239 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 10:31:36.271 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:31:47.637 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 10:33:46.171 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:33:50.453 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:33:50.456 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:33:50.456 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:33:50.458 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:33:50.808 INFO  [http-nio-10010-exec-6] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 10:33:50.808 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 10:33:50.834 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:33:56.404 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 10:34:29.207 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 10:34:32.434 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:34:33.308 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:34:33.312 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:34:33.313 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:34:33.314 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:34:33.685 INFO  [http-nio-10010-exec-7] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 10:34:33.685 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 10:34:33.713 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:35:50.616 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 10:35:55.412 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:35:56.363 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:35:56.366 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:35:56.367 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:35:56.368 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:35:56.712 INFO  [http-nio-10010-exec-10] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 10:35:56.712 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 10:35:56.738 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:38:53.755 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:39:12.206 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:39:12.216 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:39:12.219 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:39:12.219 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:39:12.219 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:44:53.677 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:44:53.688 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:44:53.691 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:44:53.691 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:44:53.691 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:45:12.411 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 10:45:15.788 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:45:16.978 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:45:16.981 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:45:16.981 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:45:16.982 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:46:07.712 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:46:07.714 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:46:07.714 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:46:07.715 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:46:11.631 INFO  [http-nio-10010-exec-1] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@cd05df58
2023-06-08 10:46:11.631 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT decode(ROUTE_NM,'20번','0'||ROUTE_NM,'1'||ROUTE_NM)   AS ord,ROUTE_NM ,EMP_NM ,BIRTH_YMD ,ENTER_DATE, HOBONG FROM TBL_DRIVERINFO td WHERE COMPANY_NO ='100' AND SP_GB  = 'SP' AND ACTIVE_STATUS ='재직' ORDER BY 1,BIRTH_YMD
2023-06-08 10:46:12.783 INFO  [http-nio-10010-exec-5] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 10:46:12.783 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 10:47:42.246 INFO  [http-nio-10010-exec-9] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@cd05df58
2023-06-08 10:47:42.247 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT decode(ROUTE_NM,'20번','0'||ROUTE_NM,'1'||ROUTE_NM)   AS ord,ROUTE_NM ,EMP_NM ,BIRTH_YMD ,ENTER_DATE, HOBONG FROM TBL_DRIVERINFO td WHERE COMPANY_NO ='100' AND SP_GB  = 'SP' AND ACTIVE_STATUS ='재직' ORDER BY 1,BIRTH_YMD
2023-06-08 10:47:43.453 INFO  [http-nio-10010-exec-6] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 10:47:43.453 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 10:47:48.209 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:47:48.214 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:47:48.215 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:47:48.216 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:47:48.563 INFO  [http-nio-10010-exec-10] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 10:47:48.563 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 10:47:48.588 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:48:14.410 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:48:14.420 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:48:14.423 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:48:14.424 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:48:14.425 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:48:14.789 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:48:22.499 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:48:22.502 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:48:22.502 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:48:22.504 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:48:22.827 INFO  [http-nio-10010-exec-6] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@a29579e6
2023-06-08 10:48:22.827 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 10:48:22.851 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:48:35.153 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:48:39.030 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:48:39.033 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:48:39.033 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:48:39.034 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:50:40.699 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 10:50:44.427 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:50:47.028 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:50:47.033 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:50:47.034 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:50:47.034 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:50:54.187 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:50:54.190 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:50:54.190 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:50:54.191 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:50:54.539 INFO  [http-nio-10010-exec-5] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 10:50:54.539 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 10:50:54.563 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:51:18.568 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:52:46.289 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 10:52:49.897 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:52:52.565 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:52:52.567 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:52:52.568 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:52:52.568 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:52:57.605 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:52:57.610 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:52:57.610 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:52:57.612 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:52:57.948 INFO  [http-nio-10010-exec-5] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 10:52:57.949 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 10:52:57.974 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:53:06.296 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:53:19.764 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:53:19.767 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:53:19.768 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:53:19.768 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:53:25.501 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 10:53:25.511 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:53:25.514 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:53:25.514 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:53:25.514 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:54:54.289 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 10:54:54.293 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 10:54:54.293 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 10:54:54.293 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 10:56:08.866 INFO  [MessageBroker-2] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 6, active threads = 1, queued tasks = 0, completed tasks = 5]
2023-06-08 11:06:58.384 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '5-1번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '5-1번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 11:06:58.389 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT '[5-1번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '5-1번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 11:06:58.389 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '5-1번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 11:06:58.390 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '5-1번' ) b ORDER BY b.prev_daily_seq
2023-06-08 11:06:58.630 INFO  [http-nio-10010-exec-4] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@cb95a416
2023-06-08 11:06:58.630 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '5-1번' AND     BASE_YM = '2023-05'
2023-06-08 11:06:58.646 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 11:07:00.687 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 11:07:05.526 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 11:07:07.636 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '5-1번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '5-1번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 11:07:07.639 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT '[5-1번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '5-1번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 11:07:07.639 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '5-1번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 11:07:07.640 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '5-1번' ) b ORDER BY b.prev_daily_seq
2023-06-08 11:07:07.865 INFO  [http-nio-10010-exec-4] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@1b406281
2023-06-08 11:07:07.865 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '5-1번' AND     BASE_YM = '2023-05'
2023-06-08 11:07:07.883 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 11:26:08.866 INFO  [MessageBroker-4] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 7, active threads = 1, queued tasks = 0, completed tasks = 6]
2023-06-08 13:04:56.239 WARN  [H2 housekeeper] [com.zaxxer.hikari.pool.HikariPool] - H2 - Thread starvation or clock leap detected (housekeeper delta=1h29m47s503ms276µs800ns).
2023-06-08 13:05:32.672 INFO  [Catalina-utility-2] [c.pjy.dashboard.listener.SessionListener] - updateUserCloseTime p00139 
2023-06-08 13:05:32.672 INFO  [Catalina-utility-2] [c.pjy.dashboard.listener.SessionListener] - currentSessionUserList ->  true
2023-06-08 13:05:32.672 INFO  [Catalina-utility-2] [c.pjy.dashboard.listener.SessionListener] - currentSessionUserList -> userId p00139 
2023-06-08 13:05:32.672 INFO  [Catalina-utility-2] [c.pjy.dashboard.listener.SessionListener] - updateUserCloseTime p00139 
2023-06-08 13:05:32.672 INFO  [Catalina-utility-2] [c.pjy.dashboard.listener.SessionListener] - currentSessionUserList ->  true
2023-06-08 13:05:32.672 INFO  [Catalina-utility-2] [c.pjy.dashboard.listener.SessionListener] - currentSessionUserList -> userId p00139 
2023-06-08 13:06:02.853 INFO  [http-nio-10010-exec-9] [c.p.d.interceptor.LoggerInterceptor] - ============================== START ==============================
2023-06-08 13:06:02.854 INFO  [http-nio-10010-exec-9] [c.p.d.interceptor.LoggerInterceptor] -  Class       	:  class org.springframework.web.method.HandlerMethod
2023-06-08 13:06:02.854 INFO  [http-nio-10010-exec-9] [c.p.d.interceptor.LoggerInterceptor] -  Request URI 	:  /
2023-06-08 13:06:02.854 INFO  [http-nio-10010-exec-9] [c.p.d.interceptor.LoggerInterceptor] -  Request addr	:  0:0:0:0:0:0:0:1
2023-06-08 13:06:02.854 INFO  [http-nio-10010-exec-9] [c.p.d.interceptor.LoggerInterceptor] -  Servlet URI 	:  /
2023-06-08 13:06:02.919 ERROR [http-nio-10010-exec-9] [o.a.c.c.C.[Tomcat].[localhost].[/].[jsp]] - Servlet.service() for servlet [jsp] threw exception
java.lang.IllegalStateException: Cannot create a session after the response has been committed
	at org.apache.catalina.connector.Request.doGetSession(Request.java:2993)
	at org.apache.catalina.connector.Request.getSession(Request.java:2432)
	at org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:908)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:244)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:582)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:527)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at org.apache.jasper.runtime.PageContextImpl.initialize(PageContextImpl.java:133)
	at org.apache.jasper.runtime.JspFactoryImpl.internalGetPageContext(JspFactoryImpl.java:109)
	at org.apache.jasper.runtime.JspFactoryImpl.getPageContext(JspFactoryImpl.java:60)
	at org.apache.jsp.WEB_002dINF.jsp.home_jsp._jspService(home_jsp.java:121)
	at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:477)
	at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:385)
	at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:329)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:712)
	at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:580)
	at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:516)
	at org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequestDispatcher.include(HeaderWriterFilter.java:149)
	at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:163)
	at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:317)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1372)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1118)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1057)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.servlet.resource.ResourceUrlEncodingFilter.doFilter(ResourceUrlEncodingFilter.java:64)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.boot.actuate.web.trace.servlet.HttpTraceFilter.doFilterInternal(HttpTraceFilter.java:88)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:155)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:97)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:74)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.security.web.FilterChainProxy$$FastClassBySpringCGLIB$$f101c706.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at com.pjy.dashboard.aop.LogAspect.handleRequestRejectedException(LogAspect.java:147)
	at jdk.internal.reflect.GeneratedMethodAccessor149.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
	at org.springframework.security.web.FilterChainProxy$$EnhancerBySpringCGLIB$$8af80e28.doFilter(<generated>)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:114)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:104)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:526)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1591)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
2023-06-08 13:06:02.932 ERROR [http-nio-10010-exec-9] [o.a.c.c.C.[.[.[/].[dispatcherServlet]] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [javax.servlet.ServletException: java.lang.IllegalStateException: Cannot create a session after the response has been committed] with root cause
java.lang.IllegalStateException: Cannot create a session after the response has been committed
	at org.apache.catalina.connector.Request.doGetSession(Request.java:2993)
	at org.apache.catalina.connector.Request.getSession(Request.java:2432)
	at org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:908)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:244)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:582)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:527)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at org.apache.jasper.runtime.PageContextImpl.initialize(PageContextImpl.java:133)
	at org.apache.jasper.runtime.JspFactoryImpl.internalGetPageContext(JspFactoryImpl.java:109)
	at org.apache.jasper.runtime.JspFactoryImpl.getPageContext(JspFactoryImpl.java:60)
	at org.apache.jsp.WEB_002dINF.jsp.home_jsp._jspService(home_jsp.java:121)
	at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:477)
	at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:385)
	at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:329)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:712)
	at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:580)
	at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:516)
	at org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequestDispatcher.include(HeaderWriterFilter.java:149)
	at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:163)
	at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:317)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1372)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1118)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1057)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.servlet.resource.ResourceUrlEncodingFilter.doFilter(ResourceUrlEncodingFilter.java:64)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.boot.actuate.web.trace.servlet.HttpTraceFilter.doFilterInternal(HttpTraceFilter.java:88)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:155)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:97)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:74)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.security.web.FilterChainProxy$$FastClassBySpringCGLIB$$f101c706.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at com.pjy.dashboard.aop.LogAspect.handleRequestRejectedException(LogAspect.java:147)
	at jdk.internal.reflect.GeneratedMethodAccessor149.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
	at org.springframework.security.web.FilterChainProxy$$EnhancerBySpringCGLIB$$8af80e28.doFilter(<generated>)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:114)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:104)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:526)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1591)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
2023-06-08 13:06:02.936 INFO  [http-nio-10010-exec-9] [c.p.d.interceptor.LoggerInterceptor] - ============================== START ==============================
2023-06-08 13:06:02.936 INFO  [http-nio-10010-exec-9] [c.p.d.interceptor.LoggerInterceptor] -  Class       	:  class org.springframework.web.method.HandlerMethod
2023-06-08 13:06:02.936 INFO  [http-nio-10010-exec-9] [c.p.d.interceptor.LoggerInterceptor] -  Request URI 	:  /error
2023-06-08 13:06:02.936 INFO  [http-nio-10010-exec-9] [c.p.d.interceptor.LoggerInterceptor] -  Request addr	:  0:0:0:0:0:0:0:1
2023-06-08 13:06:02.936 INFO  [http-nio-10010-exec-9] [c.p.d.interceptor.LoggerInterceptor] -  Servlet URI 	:  /error
2023-06-08 13:06:03.180 ERROR [http-nio-10010-exec-9] [o.a.c.c.C.[Tomcat].[localhost].[/].[jsp]] - Servlet.service() for servlet [jsp] threw exception
java.lang.IllegalStateException: Cannot create a session after the response has been committed
	at org.apache.catalina.connector.Request.doGetSession(Request.java:2993)
	at org.apache.catalina.connector.Request.getSession(Request.java:2432)
	at org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:908)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:244)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:582)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:244)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:582)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:527)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at org.apache.jasper.runtime.PageContextImpl.initialize(PageContextImpl.java:133)
	at org.apache.jasper.runtime.JspFactoryImpl.internalGetPageContext(JspFactoryImpl.java:109)
	at org.apache.jasper.runtime.JspFactoryImpl.getPageContext(JspFactoryImpl.java:60)
	at org.apache.jsp.WEB_002dINF.jsp.error_jsp._jspService(error_jsp.java:107)
	at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:477)
	at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:385)
	at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:329)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:712)
	at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:580)
	at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:516)
	at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:163)
	at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:317)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1372)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1118)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1057)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.servlet.resource.ResourceUrlEncodingFilter.doFilter(ResourceUrlEncodingFilter.java:64)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:84)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:155)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.security.web.FilterChainProxy$$FastClassBySpringCGLIB$$f101c706.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at com.pjy.dashboard.aop.LogAspect.handleRequestRejectedException(LogAspect.java:147)
	at jdk.internal.reflect.GeneratedMethodAccessor149.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
	at org.springframework.security.web.FilterChainProxy$$EnhancerBySpringCGLIB$$8af80e28.doFilter(<generated>)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:712)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:461)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:384)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:312)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:394)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:253)
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:348)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:173)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1591)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
2023-06-08 13:06:03.181 ERROR [http-nio-10010-exec-9] [o.a.c.c.C.[.[.[/].[dispatcherServlet]] - Servlet.service() for servlet [dispatcherServlet] threw exception
java.lang.IllegalStateException: Cannot create a session after the response has been committed
	at org.apache.catalina.connector.Request.doGetSession(Request.java:2993)
	at org.apache.catalina.connector.Request.getSession(Request.java:2432)
	at org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:908)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:244)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:582)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:244)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:582)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:527)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at org.apache.jasper.runtime.PageContextImpl.initialize(PageContextImpl.java:133)
	at org.apache.jasper.runtime.JspFactoryImpl.internalGetPageContext(JspFactoryImpl.java:109)
	at org.apache.jasper.runtime.JspFactoryImpl.getPageContext(JspFactoryImpl.java:60)
	at org.apache.jsp.WEB_002dINF.jsp.error_jsp._jspService(error_jsp.java:107)
	at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:477)
	at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:385)
	at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:329)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:712)
	at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:580)
	at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:516)
	at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:163)
	at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:317)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1372)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1118)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1057)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.servlet.resource.ResourceUrlEncodingFilter.doFilter(ResourceUrlEncodingFilter.java:64)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:84)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:155)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.security.web.FilterChainProxy$$FastClassBySpringCGLIB$$f101c706.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at com.pjy.dashboard.aop.LogAspect.handleRequestRejectedException(LogAspect.java:147)
	at jdk.internal.reflect.GeneratedMethodAccessor149.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
	at org.springframework.security.web.FilterChainProxy$$EnhancerBySpringCGLIB$$8af80e28.doFilter(<generated>)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:712)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:461)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:384)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:312)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:394)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:253)
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:348)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:173)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1591)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
2023-06-08 13:06:03.182 ERROR [http-nio-10010-exec-9] [o.a.c.c.C.[Tomcat].[localhost]] - Exception Processing ErrorPage[errorCode=0, location=/error]
org.apache.jasper.JasperException: javax.servlet.ServletException: java.lang.IllegalStateException: Cannot create a session after the response has been committed
	at org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:639)
	at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:500)
	at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:385)
	at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:329)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:712)
	at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:580)
	at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:516)
	at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:163)
	at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:317)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1372)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1118)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1057)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.servlet.resource.ResourceUrlEncodingFilter.doFilter(ResourceUrlEncodingFilter.java:64)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:84)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:155)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.security.web.FilterChainProxy$$FastClassBySpringCGLIB$$f101c706.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at com.pjy.dashboard.aop.LogAspect.handleRequestRejectedException(LogAspect.java:147)
	at jdk.internal.reflect.GeneratedMethodAccessor149.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
	at org.springframework.security.web.FilterChainProxy$$EnhancerBySpringCGLIB$$8af80e28.doFilter(<generated>)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:712)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:461)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:384)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:312)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:394)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:253)
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:348)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:173)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1591)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: javax.servlet.ServletException: java.lang.IllegalStateException: Cannot create a session after the response has been committed
	at org.apache.jsp.WEB_002dINF.jsp.error_jsp._jspService(error_jsp.java:144)
	at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:477)
	... 97 common frames omitted
Caused by: java.lang.IllegalStateException: Cannot create a session after the response has been committed
	at org.apache.catalina.connector.Request.doGetSession(Request.java:2993)
	at org.apache.catalina.connector.Request.getSession(Request.java:2432)
	at org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:908)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:244)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:582)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:244)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:582)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:527)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at org.apache.jasper.runtime.PageContextImpl.initialize(PageContextImpl.java:133)
	at org.apache.jasper.runtime.JspFactoryImpl.internalGetPageContext(JspFactoryImpl.java:109)
	at org.apache.jasper.runtime.JspFactoryImpl.getPageContext(JspFactoryImpl.java:60)
	at org.apache.jsp.WEB_002dINF.jsp.error_jsp._jspService(error_jsp.java:107)
	... 100 common frames omitted
2023-06-08 13:06:04.484 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.MemberServiceImpl] - ROLE_ADMIN
2023-06-08 13:06:04.543 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.MemberServiceImpl] - pass:$2a$10$MNrQAPw.4k9j2y08eTmYEeI7oKPuaWbA97HHog.8PYep5HsRwhbae,$2a$10$5FaF80ofaXskXwzPlv7Hh.wgHCpvtRWWLF2Nld02mMRR.CTbjWKqS
2023-06-08 13:06:04.604 INFO  [http-nio-10010-exec-7] [c.p.d.configuration.SecurityConfig] - authentication:: p00139
2023-06-08 13:06:06.225 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:06:10.882 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:06:12.909 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:06:12.913 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:06:12.913 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:06:12.913 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:07:00.985 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:07:03.853 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:07:04.909 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:07:04.912 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:07:04.913 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:07:04.913 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:08:08.222 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:08:10.357 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:08:11.160 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:08:11.166 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:08:11.166 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:08:11.166 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:08:45.513 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:08:47.608 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:08:48.486 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:08:48.489 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:08:48.489 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:08:48.489 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:08:58.746 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:09:00.461 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:09:01.736 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:09:01.739 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:09:01.739 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:09:01.740 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:09:23.334 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:09:24.895 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:09:26.161 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:09:26.163 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:09:26.164 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:09:26.164 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:10:04.055 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:10:06.345 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:10:07.197 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:10:07.200 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:10:07.200 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:10:07.200 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:11:19.370 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:11:22.843 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:11:23.668 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:11:23.693 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:11:23.693 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:11:23.694 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:11:59.311 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:12:00.637 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:12:01.725 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:12:01.728 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:12:01.728 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:12:01.729 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:12:28.502 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:12:30.652 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:12:31.958 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:12:31.961 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:12:31.961 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:12:31.961 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:14:38.736 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:14:40.242 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:14:41.209 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:14:41.212 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:14:41.212 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:14:41.215 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:15:09.440 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:15:11.648 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:15:13.627 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '21번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '21번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:15:13.629 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - SELECT '[21번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '21번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:15:13.630 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '21번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:15:13.630 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '21번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '21번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:15:33.907 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:15:35.995 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:15:37.058 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:15:37.061 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:15:37.061 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:15:37.062 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:15:50.970 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:15:52.818 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:15:53.692 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:15:53.695 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:15:53.695 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:15:53.696 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:16:34.521 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:16:36.059 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:16:37.037 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:16:37.040 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:16:37.040 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:16:37.041 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:17:17.222 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:17:18.829 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:17:19.766 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:17:19.768 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:17:19.769 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:17:19.769 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:17:41.768 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:17:43.237 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:17:44.204 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:17:44.206 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:17:44.206 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:17:44.206 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:19:21.082 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:19:24.103 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:19:25.522 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:19:25.525 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:19:25.526 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:19:25.526 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:19:32.886 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '5-1번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '5-1번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:19:32.890 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT '[5-1번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '5-1번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:19:32.890 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '5-1번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:19:32.891 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '5-1번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:19:33.123 INFO  [http-nio-10010-exec-4] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@1b406281
2023-06-08 13:19:33.123 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '5-1번' AND     BASE_YM = '2023-05'
2023-06-08 13:19:33.141 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:20:17.801 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:20:19.474 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:20:21.543 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '5-1번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '5-1번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:20:21.546 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT '[5-1번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '5-1번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:20:21.547 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '5-1번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:20:21.547 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '5-1번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:20:21.805 INFO  [http-nio-10010-exec-4] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@1b406281
2023-06-08 13:20:21.805 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '5-1번' AND     BASE_YM = '2023-05'
2023-06-08 13:20:21.824 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:20:55.629 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:20:57.489 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:20:59.360 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '5-1번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '5-1번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:20:59.363 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT '[5-1번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '5-1번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:20:59.363 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '5-1번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:20:59.364 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '5-1번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:20:59.607 INFO  [http-nio-10010-exec-3] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@1b406281
2023-06-08 13:20:59.607 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '5-1번' AND     BASE_YM = '2023-05'
2023-06-08 13:20:59.624 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:21:24.372 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:21:24.376 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:21:24.376 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:21:24.377 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:21:24.679 INFO  [http-nio-10010-exec-4] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 13:21:24.679 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 13:21:24.703 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:21:31.245 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:21:33.332 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:21:35.338 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:21:35.341 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:21:35.342 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:21:35.343 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:21:35.660 INFO  [http-nio-10010-exec-7] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 13:21:35.660 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 13:21:35.684 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:21:53.146 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:21:55.092 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:21:56.490 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:21:56.494 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:21:56.495 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:21:56.496 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:21:56.815 INFO  [http-nio-10010-exec-3] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 13:21:56.815 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 13:21:56.839 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:23:01.915 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM ,	a.auto_cnt as tot_count ,	max(CASE WHEN REDUCT_WEEK = 7 THEN REDUCT_COUNT ELSE 0 END) sat_count ,	max(CASE WHEN REDUCT_WEEK = 1 THEN REDUCT_COUNT ELSE 0 END) sun_count ,   'N' as bit FROM TBL_ROUTEINFO a LEFT OUTER JOIN TBM_ROUTE_REDUCTION_INFO b ON  	a.COMPANY_NO = b.COMPANY_NO  AND 	a.ROUTE_NM = b.ROUTE_NM  GROUP BY a.ROUTE_NM ,a.auto_cnt		ORDER BY 1
2023-06-08 13:23:03.213 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:25:26.265 INFO  [MessageBroker-1] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 0, completed tasks = 7]
2023-06-08 13:25:26.265 INFO  [MessageBroker-5] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 9, active threads = 2, queued tasks = 0, completed tasks = 8]
2023-06-08 13:25:26.265 INFO  [MessageBroker-9] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 10, active threads = 3, queued tasks = 0, completed tasks = 8]
2023-06-08 13:26:08.758 INFO  [MessageBroker-3] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 11, active threads = 1, queued tasks = 0, completed tasks = 10]
2023-06-08 13:26:42.309 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:26:44.116 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:26:45.348 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:26:45.352 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:26:45.352 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:26:45.354 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:26:45.696 INFO  [http-nio-10010-exec-8] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 13:26:45.696 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 13:26:45.721 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:27:44.311 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:27:45.983 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:27:48.192 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:27:48.195 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:27:48.196 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:27:48.197 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:27:48.556 INFO  [http-nio-10010-exec-3] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 13:27:48.556 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 13:27:48.584 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:32:17.015 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:32:18.668 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:32:20.923 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:32:20.927 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:32:20.927 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:32:20.928 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:32:21.285 INFO  [http-nio-10010-exec-2] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 13:32:21.285 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 13:32:21.312 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:34:30.103 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:34:33.858 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:34:35.150 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:34:35.154 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:34:35.154 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:34:35.155 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:34:35.480 INFO  [http-nio-10010-exec-7] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 13:34:35.481 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 13:34:35.505 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:35:39.131 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:35:40.914 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:35:42.708 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:35:42.711 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:35:42.712 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:35:42.712 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:35:43.096 INFO  [http-nio-10010-exec-5] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 13:35:43.096 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 13:35:43.123 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:36:36.195 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:36:38.101 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:36:39.486 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:36:39.489 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:36:39.489 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:36:39.490 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:36:39.840 INFO  [http-nio-10010-exec-6] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 13:36:39.840 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 13:36:39.865 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:39:03.523 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:39:06.241 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:39:07.600 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:39:07.603 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:39:07.604 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:39:07.605 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:39:07.938 INFO  [http-nio-10010-exec-1] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 13:39:07.938 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 13:39:07.961 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:40:16.645 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:40:16.650 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:40:16.650 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:40:16.651 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:40:16.997 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:40:28.391 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:40:31.936 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:40:31.940 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:40:31.940 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:40:31.941 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:44:19.132 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:44:21.648 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:44:23.767 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:44:23.770 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:44:23.770 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:44:23.772 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:44:24.102 INFO  [http-nio-10010-exec-10] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 13:44:24.102 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 13:44:24.127 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:45:02.711 INFO  [http-nio-10010-exec-2] [com.pjy.dashboard.dao.DynamicSqlDao] - getupdateSql_arrangeDetail sql : update  TBL_MONTH_ARRANGE_DETAIL   set    d1  = :d1          ,d2  = :d2          ,d3  = :d3          ,d4  = :d4          ,d5  = :d5          ,d6  = :d6          ,d7  = :d7          ,d8  = :d8          ,d9  = :d9          ,d10 = :d10         ,d11 = :d11         ,d12 = :d12         ,d13 = :d13         ,d14 = :d14         ,d15 = :d15         ,d16 = :d16         ,d17 = :d17         ,d18 = :d18         ,d19 = :d19         ,d20 = :d20         ,d21 = :d21         ,d22 = :d22         ,d23 = :d23         ,d24 = :d24         ,d25 = :d25         ,d26 = :d26         ,d27 = :d27         ,d28 = :d28         ,d29 = :d29         ,d30 = :d30         ,d31 = :d31 	where company_no = '100' and BASE_YM = '2023-05' and route_nm = '38번' and car_regno = :car_regno and emp_nm = :emp_nm and dispatch_seq = 6 
2023-06-08 13:45:02.747 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:45:02.751 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:45:02.752 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:45:02.756 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:45:03.106 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:45:07.513 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:45:07.517 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:45:07.517 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:45:07.518 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:45:39.855 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:45:39.858 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:45:39.858 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:45:39.860 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:45:40.216 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:46:55.916 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 13:46:57.973 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:46:59.807 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:46:59.811 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:46:59.812 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:46:59.812 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:47:00.194 INFO  [http-nio-10010-exec-3] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 13:47:00.194 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 13:47:00.219 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:47:05.684 INFO  [http-nio-10010-exec-9] [com.pjy.dashboard.dao.DynamicSqlDao] - getupdateSql_arrangeDetail sql : update  TBL_MONTH_ARRANGE_DETAIL   set    d1  = :d1          ,d2  = :d2          ,d3  = :d3          ,d4  = :d4          ,d5  = :d5          ,d6  = :d6          ,d7  = :d7          ,d8  = :d8          ,d9  = :d9          ,d10 = :d10         ,d11 = :d11         ,d12 = :d12         ,d13 = :d13         ,d14 = :d14         ,d15 = :d15         ,d16 = :d16         ,d17 = :d17         ,d18 = :d18         ,d19 = :d19         ,d20 = :d20         ,d21 = :d21         ,d22 = :d22         ,d23 = :d23         ,d24 = :d24         ,d25 = :d25         ,d26 = :d26         ,d27 = :d27         ,d28 = :d28         ,d29 = :d29         ,d30 = :d30         ,d31 = :d31 	where company_no = '100' and BASE_YM = '2023-05' and route_nm = '38번' and car_regno = :car_regno and emp_nm = :emp_nm and dispatch_seq = 6 
2023-06-08 13:47:05.693 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:47:05.696 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:47:05.697 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:47:05.698 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:47:06.055 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 13:47:10.521 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:47:10.524 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:47:10.525 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 13:47:10.526 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 13:47:22.549 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 13:47:22.553 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 13:47:22.553 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH RECURSIVE countera(n) AS ( WITH routeCount AS ( SELECT 'a' ampm_gubun, a.AUTO_CNT FROM TBL_ROUTEINFO a WHERE 	a.COMPANY_NO  = '100' AND 	a.ROUTE_NM    = '38번'	 union SELECT 'p' ampm_gubun, a.AUTO_CNT FROM TBL_ROUTEINFO a WHERE 	a.COMPANY_NO  = '100' AND 	a.ROUTE_NM    = '38번' ) SELECT t.n+1,t.n as no,c.ampm_gubun,to_char(t.n,'00') || c.ampm_gubun AS gubun ,  CASE WHEN a.ampm_gubun = '' AND a.d1 like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d1 ,'[*@?]') and a.d1  like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d1        ,  CASE WHEN a.ampm_gubun = '' AND a.d2  like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d2  ,'[*@?]') and a.d2   like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d2     ,  CASE WHEN a.ampm_gubun = '' AND a.d3  like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d3  ,'[*@?]') and a.d3   like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d3     ,  CASE WHEN a.ampm_gubun = '' AND a.d4  like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d4  ,'[*@?]') and a.d4   like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d4     ,  CASE WHEN a.ampm_gubun = '' AND a.d5  like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d5  ,'[*@?]') and a.d5   like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d5     ,  CASE WHEN a.ampm_gubun = '' AND a.d6  like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d6  ,'[*@?]') and a.d6   like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d6     ,  CASE WHEN a.ampm_gubun = '' AND a.d7  like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d7  ,'[*@?]') and a.d7   like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d7     ,  CASE WHEN a.ampm_gubun = '' AND a.d8  like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d8  ,'[*@?]') and a.d8   like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d8     ,  CASE WHEN a.ampm_gubun = '' AND a.d9  like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d9  ,'[*@?]') and a.d9   like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d9     ,  CASE WHEN a.ampm_gubun = '' AND a.d10 like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d10 ,'[*@?]') and a.d10  like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d10    ,  CASE WHEN a.ampm_gubun = '' AND a.d11 like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d11 ,'[*@?]') and a.d11  like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d11    ,  CASE WHEN a.ampm_gubun = '' AND a.d12 like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d12 ,'[*@?]') and a.d12  like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d12    ,  CASE WHEN a.ampm_gubun = '' AND a.d13 like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d13 ,'[*@?]') and a.d13  like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d13    ,  CASE WHEN a.ampm_gubun = '' AND a.d14 like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d14 ,'[*@?]') and a.d14  like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d14    ,  CASE WHEN a.ampm_gubun = '' AND a.d15 like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d15 ,'[*@?]') and a.d15  like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d15    ,  CASE WHEN a.ampm_gubun = '' AND a.d16 like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d16 ,'[*@?]') and a.d16  like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d16    ,  CASE WHEN a.ampm_gubun = '' AND a.d17 like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d17 ,'[*@?]') and a.d17  like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d17    ,  CASE WHEN a.ampm_gubun = '' AND a.d18 like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d18 ,'[*@?]') and a.d18  like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d18    ,  CASE WHEN a.ampm_gubun = '' AND a.d19 like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d19 ,'[*@?]') and a.d19  like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d19    ,  CASE WHEN a.ampm_gubun = '' AND a.d20 like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d20 ,'[*@?]') and a.d20  like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d20    ,  CASE WHEN a.ampm_gubun = '' AND a.d21 like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d21 ,'[*@?]') and a.d21  like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d21    ,  CASE WHEN a.ampm_gubun = '' AND a.d22 like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d22 ,'[*@?]') and a.d22  like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d22    ,  CASE WHEN a.ampm_gubun = '' AND a.d23 like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d23 ,'[*@?]') and a.d23  like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d23    ,  CASE WHEN a.ampm_gubun = '' AND a.d24 like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d24 ,'[*@?]') and a.d24  like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d24    ,  CASE WHEN a.ampm_gubun = '' AND a.d25 like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d25 ,'[*@?]') and a.d25  like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d25    ,  CASE WHEN a.ampm_gubun = '' AND a.d26 like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d26 ,'[*@?]') and a.d26  like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d26    ,  CASE WHEN a.ampm_gubun = '' AND a.d27 like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d27 ,'[*@?]') and a.d27  like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d27    ,  CASE WHEN a.ampm_gubun = '' AND a.d28 like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d28 ,'[*@?]') and a.d28  like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d28    ,  CASE WHEN a.ampm_gubun = '' AND a.d29 like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d29 ,'[*@?]') and a.d29  like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d29    ,  CASE WHEN a.ampm_gubun = '' AND a.d30 like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d30 ,'[*@?]') and a.d30  like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d30    ,  CASE WHEN a.ampm_gubun = '' AND a.d31 like t.n || c.ampm_gubun ||'%' THEN emp_nm ||'*' WHEN not REGEXP_LIKE(a.d31 ,'[*@?]') and a.d31  like t.n || c.ampm_gubun  THEN EMP_NM ELSE '' END d31    FROM t ,TBL_MONTH_ARRANGE_DETAIL a , routeCount c WHERE 	a.COMPANY_NO  = '100' AND 	a.ROUTE_NM    = '38번' AND 	a.BASE_YM = '2023-05' AND 	a.dispatch_seq = 6 AND     t.n <= c.auto_cnt ) SELECT 	decode(ampm_gubun,'a','오전','오후') as ampm_gubun , no as seq,0 as cnt ,	max(d1 ) as d1 ,	max(d2 ) as d2 ,	max(d3 ) as d3 ,	max(d4 ) as d4 ,	max(d5 ) as d5 ,	max(d6 ) as d6 ,	max(d7 ) as d7 ,	max(d8 ) as d8 ,	max(d9 ) as d9 ,	max(d10) as d10 ,	max(d11) as d11 ,	max(d12) as d12 ,	max(d13) as d13 ,	max(d14) as d14 ,	max(d15) as d15 ,	max(d16) as d16 ,	max(d17) as d17 ,	max(d18) as d18 ,	max(d19) as d19 ,	max(d20) as d20 ,	max(d21) as d21 ,	max(d22) as d22 ,	max(d23) as d23 ,	max(d24) as d24 ,	max(d25) as d25 ,	max(d26) as d26 ,	max(d27) as d27 ,	max(d28) as d28 ,	max(d29) as d29 ,	max(d30) as d30 ,	max(d31) as d31 from countera GROUP BY ampm_gubun,gubun
2023-06-08 13:48:52.746 INFO  [http-nio-10010-exec-2] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@708e9637
2023-06-08 13:48:52.746 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT k.*,e.phone_no,e.email,e.emp_no FROM ( SELECT a.CAR_REGNO ,a.EMP_NM ,'' as value,REGEXP_REPLACE(a.d16,'[*0-9@]','') AS ampm,convert(REGEXP_REPLACE(a.d16,'[*ap@]',''),int) AS seq FROM 	TBL_MONTH_ARRANGE_DETAIL a WHERE 	a.company_no = '100' AND 	a.route_nm = '38번' AND    a.BASE_Ym = '2023-05' AND    a.CAR_REGNO  NOT LIKE 'SP%' AND 	a.d16 NOT LIKE '%*%' AND 	a.d16 NOT LIKE '%@%' AND    a.DISPATCH_SEQ = 6 UNION ALL SELECT a.CAR_REGNO ,b.EMP_NM ,decode(b.EMP_NM,NULL,'','SP') AS value,REGEXP_REPLACE(a.d16,'[*0-9@-]','') AS ampm,convert(REGEXP_REPLACE(a.d16,'[*ap@-]',''),int) AS seq FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN TBL_MONTH_ARRANGE_DETAIL b on     a.COMPANY_NO =b.COMPANY_NO AND 	a.ROUTE_NM = b.ROUTE_NM AND 	a.BASE_YM  = b.BASE_YM AND 	a.DISPATCH_SEQ = b.DISPATCH_SEQ AND    b.CAR_REGNO LIKE 'SP%' AND    b.d16 <>'' AND 	a.d16 LIKE b.d16 || '%' WHERE	a.company_no = '100'  AND 	a.route_nm = '38번' AND     a.BASE_Ym = '2023-05' AND     a.CAR_REGNO  NOT LIKE 'SP%' AND 	(a.d16 LIKE '%*%' OR a.d16 LIKE '%@%') AND     a.DISPATCH_SEQ = 6 ) k left outer join tbl_employeeInfo e on k.emp_nm = e.emp_nm AND 	e.company_no = '100' ORDER BY 4 ,5
2023-06-08 13:49:11.109 INFO  [http-nio-10010-exec-2] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@e9e675d1
2023-06-08 13:49:11.110 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT k.*,e.phone_no,e.email,e.emp_no FROM ( SELECT a.CAR_REGNO ,a.EMP_NM ,'' as value,REGEXP_REPLACE(a.d14,'[*0-9@]','') AS ampm,convert(REGEXP_REPLACE(a.d14,'[*ap@]',''),int) AS seq FROM 	TBL_MONTH_ARRANGE_DETAIL a WHERE 	a.company_no = '100' AND 	a.route_nm = '38번' AND    a.BASE_Ym = '2023-05' AND    a.CAR_REGNO  NOT LIKE 'SP%' AND 	a.d14 NOT LIKE '%*%' AND 	a.d14 NOT LIKE '%@%' AND    a.DISPATCH_SEQ = 6 UNION ALL SELECT a.CAR_REGNO ,b.EMP_NM ,decode(b.EMP_NM,NULL,'','SP') AS value,REGEXP_REPLACE(a.d14,'[*0-9@-]','') AS ampm,convert(REGEXP_REPLACE(a.d14,'[*ap@-]',''),int) AS seq FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN TBL_MONTH_ARRANGE_DETAIL b on     a.COMPANY_NO =b.COMPANY_NO AND 	a.ROUTE_NM = b.ROUTE_NM AND 	a.BASE_YM  = b.BASE_YM AND 	a.DISPATCH_SEQ = b.DISPATCH_SEQ AND    b.CAR_REGNO LIKE 'SP%' AND    b.d14 <>'' AND 	a.d14 LIKE b.d14 || '%' WHERE	a.company_no = '100'  AND 	a.route_nm = '38번' AND     a.BASE_Ym = '2023-05' AND     a.CAR_REGNO  NOT LIKE 'SP%' AND 	(a.d14 LIKE '%*%' OR a.d14 LIKE '%@%') AND     a.DISPATCH_SEQ = 6 ) k left outer join tbl_employeeInfo e on k.emp_nm = e.emp_nm AND 	e.company_no = '100' ORDER BY 4 ,5
2023-06-08 13:56:08.762 INFO  [MessageBroker-2] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 12, active threads = 1, queued tasks = 0, completed tasks = 11]
2023-06-08 14:12:50.973 WARN  [H2 housekeeper] [com.zaxxer.hikari.pool.HikariPool] - H2 - Thread starvation or clock leap detected (housekeeper delta=8m23s938ms885µs900ns).
2023-06-08 14:17:23.623 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 14:17:25.927 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 14:17:28.012 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 14:17:28.017 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 14:17:28.017 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 14:17:28.018 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 14:17:28.335 INFO  [http-nio-10010-exec-9] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 14:17:28.335 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 14:17:28.358 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 14:19:22.288 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 14:19:24.025 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 14:19:25.131 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 14:19:25.135 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 14:19:25.135 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 14:19:25.136 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 14:19:25.492 INFO  [http-nio-10010-exec-8] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 14:19:25.492 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 14:19:25.519 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 14:20:18.043 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 14:20:19.699 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 14:20:21.115 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 14:20:21.119 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 14:20:21.119 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 14:20:21.120 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 14:20:21.493 INFO  [http-nio-10010-exec-3] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 14:20:21.493 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 14:20:21.521 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 14:21:16.644 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 14:21:18.372 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 14:21:20.355 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 14:21:20.358 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 14:21:20.359 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 14:21:20.360 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 14:21:20.735 INFO  [http-nio-10010-exec-8] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 14:21:20.735 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 14:21:20.762 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 14:21:47.257 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 14:21:48.853 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 14:21:50.103 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 14:21:50.106 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 14:21:50.107 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 14:21:50.108 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 14:21:50.489 INFO  [http-nio-10010-exec-10] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 14:21:50.489 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 14:21:50.517 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 14:23:18.806 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 14:23:21.767 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 14:23:23.925 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 14:23:23.929 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 14:23:23.929 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 14:23:23.931 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 14:23:24.300 INFO  [http-nio-10010-exec-1] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 14:23:24.300 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 14:23:24.324 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 14:23:43.201 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 14:23:45.144 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 14:23:46.506 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 14:23:46.509 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 14:23:46.510 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 14:23:46.510 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 14:23:46.892 INFO  [http-nio-10010-exec-3] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 14:23:46.892 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 14:23:46.918 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 14:25:41.662 INFO  [http-nio-10010-exec-9] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@a4cfbfb6
2023-06-08 14:25:41.662 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  substr(b.start_date,6) as start_date ,	b.emp_nm ,	b.attendance_type , 	b.memo FROM TBL_DRIVERINFO a,TBM_DRIVER_ATTENDANCE_INFO b WHERE 	a.COMPANY_NO ='100' AND 	a.route_nm = '38번' AND 	a.COMPANY_NO  = b.COMPANY_NO AND 	a.EMP_NM = b.EMP_NM AND     b.delete_yn = 'N' AND 	b.START_DATE LIKE '2023-05' || '%' ORDER BY 1,2
2023-06-08 14:27:44.954 INFO  [http-nio-10010-exec-1] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@a4cfbfb6
2023-06-08 14:27:44.954 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  substr(b.start_date,6) as start_date ,	b.emp_nm ,	b.attendance_type , 	b.memo FROM TBL_DRIVERINFO a,TBM_DRIVER_ATTENDANCE_INFO b WHERE 	a.COMPANY_NO ='100' AND 	a.route_nm = '38번' AND 	a.COMPANY_NO  = b.COMPANY_NO AND 	a.EMP_NM = b.EMP_NM AND     b.delete_yn = 'N' AND 	b.START_DATE LIKE '2023-05' || '%' ORDER BY 1,2
2023-06-08 14:27:56.247 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 14:27:56.253 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 14:27:56.253 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 14:27:56.255 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 14:27:56.596 INFO  [http-nio-10010-exec-6] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 14:27:56.596 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 14:27:56.614 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 14:28:04.510 INFO  [http-nio-10010-exec-5] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@a4cfbfb6
2023-06-08 14:28:04.510 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  substr(b.start_date,6) as start_date ,	b.emp_nm ,	b.attendance_type , 	b.memo FROM TBL_DRIVERINFO a,TBM_DRIVER_ATTENDANCE_INFO b WHERE 	a.COMPANY_NO ='100' AND 	a.route_nm = '38번' AND 	a.COMPANY_NO  = b.COMPANY_NO AND 	a.EMP_NM = b.EMP_NM AND     b.delete_yn = 'N' AND 	b.START_DATE LIKE '2023-05' || '%' ORDER BY 1,2
2023-06-08 14:28:24.193 INFO  [http-nio-10010-exec-9] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@a4cfbfb6
2023-06-08 14:28:24.193 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  substr(b.start_date,6) as start_date ,	b.emp_nm ,	b.attendance_type , 	b.memo FROM TBL_DRIVERINFO a,TBM_DRIVER_ATTENDANCE_INFO b WHERE 	a.COMPANY_NO ='100' AND 	a.route_nm = '38번' AND 	a.COMPANY_NO  = b.COMPANY_NO AND 	a.EMP_NM = b.EMP_NM AND     b.delete_yn = 'N' AND 	b.START_DATE LIKE '2023-05' || '%' ORDER BY 1,2
2023-06-08 14:28:27.792 INFO  [http-nio-10010-exec-3] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@a4cfbfb6
2023-06-08 14:28:27.792 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  substr(b.start_date,6) as start_date ,	b.emp_nm ,	b.attendance_type , 	b.memo FROM TBL_DRIVERINFO a,TBM_DRIVER_ATTENDANCE_INFO b WHERE 	a.COMPANY_NO ='100' AND 	a.route_nm = '38번' AND 	a.COMPANY_NO  = b.COMPANY_NO AND 	a.EMP_NM = b.EMP_NM AND     b.delete_yn = 'N' AND 	b.START_DATE LIKE '2023-05' || '%' ORDER BY 1,2
2023-06-08 14:29:23.904 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 14:29:23.908 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 14:29:23.909 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 14:29:23.910 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 14:29:24.355 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 14:34:02.594 INFO  [MessageBroker-7] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 13, active threads = 1, queued tasks = 0, completed tasks = 12]
2023-06-08 14:49:08.424 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 14:49:11.204 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 14:49:12.887 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 14:49:12.890 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 14:49:12.891 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.INIT_SEQ = 0 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 14:49:12.892 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 14:49:13.226 INFO  [http-nio-10010-exec-2] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 14:49:13.226 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 14:49:13.250 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 14:49:42.888 INFO  [http-nio-10010-exec-10] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@da6bd719
2023-06-08 14:49:42.888 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT decode(ROUTE_NM,'38번','0'||ROUTE_NM,'1'||ROUTE_NM)   AS ord,ROUTE_NM ,EMP_NM ,BIRTH_YMD ,ENTER_DATE, HOBONG FROM TBL_DRIVERINFO td WHERE COMPANY_NO ='100' AND SP_GB  = 'SP' AND ACTIVE_STATUS ='재직' ORDER BY 1,BIRTH_YMD
2023-06-08 14:49:44.102 INFO  [http-nio-10010-exec-7] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d19f5e7f
2023-06-08 14:49:44.102 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	WEEK_GB ,	decode(SUBSTR(WEEK_GB,1,1),'공','공휴일','토','토요일','평','평일') as WEEK_GB1 ,	decode(SUBSTR(WEEK_GB,2,1),'공','공휴일','토','토요일','평','평일') as WEEK_GB2 , 	NEXT_WORK_INTERVAL , 	'N' as bit ,	route_nm FROM 	TBM_ROUTE_WEEKSEQ_INFO  WHERE 	COMPANY_NO ='100' AND 	route_nm = '38번' ORDER BY 1
2023-06-08 14:49:45.962 INFO  [http-nio-10010-exec-4] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@a4cfbfb6
2023-06-08 14:49:45.963 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  substr(b.start_date,6) as start_date ,	b.emp_nm ,	b.attendance_type , 	b.memo FROM TBL_DRIVERINFO a,TBM_DRIVER_ATTENDANCE_INFO b WHERE 	a.COMPANY_NO ='100' AND 	a.route_nm = '38번' AND 	a.COMPANY_NO  = b.COMPANY_NO AND 	a.EMP_NM = b.EMP_NM AND     b.delete_yn = 'N' AND 	b.START_DATE LIKE '2023-05' || '%' ORDER BY 1,2
2023-06-08 14:49:47.305 INFO  [http-nio-10010-exec-8] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 14:49:47.305 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 14:49:48.025 INFO  [http-nio-10010-exec-5] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@da6bd719
2023-06-08 14:49:48.025 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT decode(ROUTE_NM,'38번','0'||ROUTE_NM,'1'||ROUTE_NM)   AS ord,ROUTE_NM ,EMP_NM ,BIRTH_YMD ,ENTER_DATE, HOBONG FROM TBL_DRIVERINFO td WHERE COMPANY_NO ='100' AND SP_GB  = 'SP' AND ACTIVE_STATUS ='재직' ORDER BY 1,BIRTH_YMD
2023-06-08 14:49:49.179 INFO  [http-nio-10010-exec-1] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@a4cfbfb6
2023-06-08 14:49:49.179 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  substr(b.start_date,6) as start_date ,	b.emp_nm ,	b.attendance_type , 	b.memo FROM TBL_DRIVERINFO a,TBM_DRIVER_ATTENDANCE_INFO b WHERE 	a.COMPANY_NO ='100' AND 	a.route_nm = '38번' AND 	a.COMPANY_NO  = b.COMPANY_NO AND 	a.EMP_NM = b.EMP_NM AND     b.delete_yn = 'N' AND 	b.START_DATE LIKE '2023-05' || '%' ORDER BY 1,2
2023-06-08 14:49:50.091 INFO  [http-nio-10010-exec-9] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 14:49:50.091 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 14:56:08.669 INFO  [MessageBroker-4] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 14, active threads = 1, queued tasks = 0, completed tasks = 13]
2023-06-08 15:02:18.692 INFO  [http-nio-10010-exec-8] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@a4cfbfb6
2023-06-08 15:02:18.692 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  substr(b.start_date,6) as start_date ,	b.emp_nm ,	b.attendance_type , 	b.memo FROM TBL_DRIVERINFO a,TBM_DRIVER_ATTENDANCE_INFO b WHERE 	a.COMPANY_NO ='100' AND 	a.route_nm = '38번' AND 	a.COMPANY_NO  = b.COMPANY_NO AND 	a.EMP_NM = b.EMP_NM AND     b.delete_yn = 'N' AND 	b.START_DATE LIKE '2023-05' || '%' ORDER BY 1,2
2023-06-08 15:26:08.665 INFO  [MessageBroker-8] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 15, active threads = 1, queued tasks = 0, completed tasks = 14]
2023-06-08 15:28:06.703 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 15:28:06.707 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 15:28:06.707 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.INIT_SEQ = 0 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 15:28:06.709 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 15:28:07.100 INFO  [http-nio-10010-exec-9] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 15:28:07.100 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 15:28:07.121 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 15:28:11.531 INFO  [http-nio-10010-exec-6] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 15:28:11.531 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 15:28:13.867 INFO  [http-nio-10010-exec-3] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@da6bd719
2023-06-08 15:28:13.867 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT decode(ROUTE_NM,'38번','0'||ROUTE_NM,'1'||ROUTE_NM)   AS ord,ROUTE_NM ,EMP_NM ,BIRTH_YMD ,ENTER_DATE, HOBONG FROM TBL_DRIVERINFO td WHERE COMPANY_NO ='100' AND SP_GB  = 'SP' AND ACTIVE_STATUS ='재직' ORDER BY 1,BIRTH_YMD
2023-06-08 15:28:14.805 INFO  [http-nio-10010-exec-10] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d19f5e7f
2023-06-08 15:28:14.805 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	WEEK_GB ,	decode(SUBSTR(WEEK_GB,1,1),'공','공휴일','토','토요일','평','평일') as WEEK_GB1 ,	decode(SUBSTR(WEEK_GB,2,1),'공','공휴일','토','토요일','평','평일') as WEEK_GB2 , 	NEXT_WORK_INTERVAL , 	'N' as bit ,	route_nm FROM 	TBM_ROUTE_WEEKSEQ_INFO  WHERE 	COMPANY_NO ='100' AND 	route_nm = '38번' ORDER BY 1
2023-06-08 15:28:15.489 INFO  [http-nio-10010-exec-7] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@a4cfbfb6
2023-06-08 15:28:15.489 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  substr(b.start_date,6) as start_date ,	b.emp_nm ,	b.attendance_type , 	b.memo FROM TBL_DRIVERINFO a,TBM_DRIVER_ATTENDANCE_INFO b WHERE 	a.COMPANY_NO ='100' AND 	a.route_nm = '38번' AND 	a.COMPANY_NO  = b.COMPANY_NO AND 	a.EMP_NM = b.EMP_NM AND     b.delete_yn = 'N' AND 	b.START_DATE LIKE '2023-05' || '%' ORDER BY 1,2
2023-06-08 15:28:17.267 INFO  [http-nio-10010-exec-4] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 15:28:17.267 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 15:28:24.576 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 15:28:24.579 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 15:28:24.579 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.INIT_SEQ = 0 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 15:28:24.580 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 15:28:28.002 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 15:28:28.006 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 15:28:28.006 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.INIT_SEQ = 0 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 15:28:28.007 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 15:28:28.350 INFO  [http-nio-10010-exec-9] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 15:28:28.350 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 15:28:28.375 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 15:28:33.116 INFO  [http-nio-10010-exec-6] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@9769c7f5
2023-06-08 15:28:33.116 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  substr(b.start_date,6) as start_date ,	b.emp_nm ,	b.attendance_type , 	b.memo FROM TBL_DRIVERINFO a,TBM_DRIVER_ATTENDANCE_INFO b WHERE 	a.COMPANY_NO ='100' AND 	a.route_nm = '20번' AND 	a.COMPANY_NO  = b.COMPANY_NO AND 	a.EMP_NM = b.EMP_NM AND     b.delete_yn = 'N' AND 	b.START_DATE LIKE '2023-05' || '%' ORDER BY 1,2
2023-06-08 15:28:36.946 INFO  [http-nio-10010-exec-3] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 15:28:36.946 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 15:28:42.768 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM ,	a.auto_cnt as tot_count ,	max(CASE WHEN REDUCT_WEEK = 7 THEN REDUCT_COUNT ELSE 0 END) sat_count ,	max(CASE WHEN REDUCT_WEEK = 1 THEN REDUCT_COUNT ELSE 0 END) sun_count ,   'N' as bit FROM TBL_ROUTEINFO a LEFT OUTER JOIN TBM_ROUTE_REDUCTION_INFO b ON  	a.COMPANY_NO = b.COMPANY_NO  AND 	a.ROUTE_NM = b.ROUTE_NM  GROUP BY a.ROUTE_NM ,a.auto_cnt		ORDER BY 1
2023-06-08 15:28:43.648 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 15:29:34.485 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 15:29:34.489 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 15:29:34.489 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.INIT_SEQ = 0 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 15:29:34.490 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 15:29:34.854 INFO  [http-nio-10010-exec-8] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 15:29:34.854 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 15:29:34.879 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 15:46:23.918 INFO  [restartedMain] [com.pjy.dashboard.PjyApplication] - Starting PjyApplication on DESKTOP-3O1I9JM with PID 34092 (C:\BUS\multimodule-parent\dashboard\target\classes started by admin in C:\BUS\multimodule-parent\dashboard)
2023-06-08 15:46:23.921 INFO  [restartedMain] [com.pjy.dashboard.PjyApplication] - The following profiles are active: oauth
2023-06-08 15:46:23.959 INFO  [restartedMain] [o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor] - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-06-08 15:46:23.959 INFO  [restartedMain] [o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor] - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-06-08 15:46:25.610 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode!
2023-06-08 15:46:25.610 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-08 15:46:25.706 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 90ms. Found 2 JPA repository interfaces.
2023-06-08 15:46:25.951 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode!
2023-06-08 15:46:25.952 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2023-06-08 15:46:25.987 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationExtensionSupport] - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.pjy.dashboard.core.dao.jpa.h2.MemberRepository. If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2023-06-08 15:46:25.987 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationExtensionSupport] - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.pjy.dashboard.core.dao.jpa.h2.RememberMeRepository. If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2023-06-08 15:46:25.987 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 35ms. Found 0 JDBC repository interfaces.
2023-06-08 15:46:26.289 INFO  [restartedMain] [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] - Post-processing PropertySource instances
2023-06-08 15:46:26.342 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2023-06-08 15:46:26.342 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource commandLineArgs [org.springframework.core.env.SimpleCommandLinePropertySource] to EncryptableEnumerablePropertySourceWrapper
2023-06-08 15:46:26.342 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource servletConfigInitParams [org.springframework.core.env.PropertySource$StubPropertySource] to EncryptablePropertySourceWrapper
2023-06-08 15:46:26.342 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource servletContextInitParams [org.springframework.core.env.PropertySource$StubPropertySource] to EncryptablePropertySourceWrapper
2023-06-08 15:46:26.342 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2023-06-08 15:46:26.342 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableSystemEnvironmentPropertySourceWrapper
2023-06-08 15:46:26.343 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2023-06-08 15:46:26.343 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource applicationConfig: [classpath:/application-oauth.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2023-06-08 15:46:26.343 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2023-06-08 15:46:26.343 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource devtools [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2023-06-08 15:46:26.343 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource class path resource [pjy.properties] [org.springframework.core.env.CompositePropertySource] to EncryptableEnumerablePropertySourceWrapper
2023-06-08 15:46:26.343 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource class path resource [common.properties] [org.springframework.core.io.support.ResourcePropertySource] to EncryptableMapPropertySourceWrapper
2023-06-08 15:46:26.392 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'asyncConfiguration' of type [com.pjy.dashboard.configuration.AsyncConfiguration$$EnhancerBySpringCGLIB$$4d98e8c3] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 15:46:26.427 INFO  [restartedMain] [c.u.j.filter.DefaultLazyPropertyFilter] - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2023-06-08 15:46:26.488 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration$$EnhancerBySpringCGLIB$$378f4cf0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 15:46:26.547 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 15:46:26.548 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@5c729db7' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 15:46:26.551 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration$$EnhancerBySpringCGLIB$$5c63efa2] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 15:46:26.557 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'org.springframework.security.config.annotation.method.configuration.Jsr250MetadataSourceConfiguration' of type [org.springframework.security.config.annotation.method.configuration.Jsr250MetadataSourceConfiguration$$EnhancerBySpringCGLIB$$81b907b8] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 15:46:26.560 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'jsr250MethodSecurityMetadataSource' of type [org.springframework.security.access.annotation.Jsr250MethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 15:46:26.560 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 15:46:26.572 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$9ee184b6] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 15:46:26.591 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'org.springframework.hateoas.config.HateoasConfiguration' of type [org.springframework.hateoas.config.HateoasConfiguration$$EnhancerBySpringCGLIB$$1e61d1e8] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 15:46:26.670 INFO  [restartedMain] [c.u.j.r.DefaultLazyPropertyResolver] - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2023-06-08 15:46:26.674 INFO  [restartedMain] [c.u.j.d.DefaultLazyPropertyDetector] - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2023-06-08 15:46:26.964 INFO  [restartedMain] [o.s.b.w.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 10010 (http)
2023-06-08 15:46:26.976 INFO  [restartedMain] [o.apache.coyote.http11.Http11NioProtocol] - Initializing ProtocolHandler ["http-nio-10010"]
2023-06-08 15:46:26.982 INFO  [restartedMain] [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2023-06-08 15:46:26.983 INFO  [restartedMain] [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.29]
2023-06-08 15:46:27.188 INFO  [restartedMain] [org.apache.jasper.servlet.TldScanner] - At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.
2023-06-08 15:46:27.195 INFO  [restartedMain] [o.a.c.c.C.[Tomcat].[localhost].[/]] - Initializing Spring embedded WebApplicationContext
2023-06-08 15:46:27.195 INFO  [restartedMain] [o.s.web.context.ContextLoader] - Root WebApplicationContext: initialization completed in 3236 ms
2023-06-08 15:46:27.699 INFO  [restartedMain] [c.u.j.encryptor.DefaultLazyEncryptor] - Found Custom Encryptor Bean org.jasypt.encryption.pbe.PooledPBEStringEncryptor@7664cf76 with name: jasyptStringEncryptor
2023-06-08 15:46:27.728 INFO  [restartedMain] [com.zaxxer.hikari.HikariDataSource] - H2 - Starting...
2023-06-08 15:46:27.785 INFO  [restartedMain] [com.zaxxer.hikari.HikariDataSource] - H2 - Start completed.
2023-06-08 15:46:28.224 INFO  [restartedMain] [com.pjy.dashboard.filter.TestFilter] - init Pjy Filter
2023-06-08 15:46:28.474 INFO  [restartedMain] [o.hibernate.jpa.internal.util.LogHelper] - HHH000204: Processing PersistenceUnitInfo [
	name: default
	...]
2023-06-08 15:46:28.528 INFO  [restartedMain] [org.hibernate.Version] - HHH000412: Hibernate Core {5.3.14.Final}
2023-06-08 15:46:28.529 INFO  [restartedMain] [org.hibernate.cfg.Environment] - HHH000206: hibernate.properties not found
2023-06-08 15:46:28.642 INFO  [restartedMain] [org.hibernate.annotations.common.Version] - HCANN000001: Hibernate Commons Annotations {5.0.4.Final}
2023-06-08 15:46:28.806 INFO  [restartedMain] [org.hibernate.dialect.Dialect] - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-06-08 15:46:29.331 INFO  [restartedMain] [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-08 15:46:29.524 INFO  [restartedMain] [o.h.h.i.QueryTranslatorFactoryInitiator] - HHH000397: Using ASTQueryTranslatorFactory
2023-06-08 15:46:29.713 INFO  [restartedMain] [o.s.s.concurrent.ThreadPoolTaskExecutor] - Initializing ExecutorService 'clientInboundChannelExecutor'
2023-06-08 15:46:29.722 INFO  [restartedMain] [o.s.s.concurrent.ThreadPoolTaskExecutor] - Initializing ExecutorService 'clientOutboundChannelExecutor'
2023-06-08 15:46:30.360 INFO  [restartedMain] [o.s.s.concurrent.ThreadPoolTaskExecutor] - Initializing ExecutorService
2023-06-08 15:46:30.361 INFO  [restartedMain] [o.s.s.concurrent.ThreadPoolTaskExecutor] - Initializing ExecutorService 'asyncThreadPool'
2023-06-08 15:46:30.491 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/h2-console/**'], []
2023-06-08 15:46:30.491 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/css/**'], []
2023-06-08 15:46:30.491 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/js/**'], []
2023-06-08 15:46:30.491 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/monitor/**'], []
2023-06-08 15:46:30.491 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/img/**'], []
2023-06-08 15:46:30.491 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/lib/**'], []
2023-06-08 15:46:30.491 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/main.css'], []
2023-06-08 15:46:30.491 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/common.js'], []
2023-06-08 15:46:30.491 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/resources/**'], []
2023-06-08 15:46:30.602 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@25099f3, org.springframework.security.web.context.SecurityContextPersistenceFilter@75a4b92e, org.springframework.security.web.header.HeaderWriterFilter@4d93d0c6, org.springframework.web.filter.CorsFilter@11d17c94, org.springframework.security.web.authentication.logout.LogoutFilter@54773a74, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@6371d362, org.springframework.security.web.session.ConcurrentSessionFilter@286f84bc, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@74c9cda0, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2329b0d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@51183190, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@16088d9b, org.springframework.security.web.session.SessionManagementFilter@29323c6d, org.springframework.security.web.access.ExceptionTranslationFilter@11347d8e, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@9b9200e]
2023-06-08 15:46:30.617 INFO  [restartedMain] [o.s.aop.framework.CglibAopProxy] - Unable to proxy interface-implementing method [public final void org.springframework.web.filter.GenericFilterBean.init(javax.servlet.FilterConfig) throws javax.servlet.ServletException] because it is marked as final: Consider using interface-based JDK proxies instead!
2023-06-08 15:46:30.649 INFO  [restartedMain] [o.s.s.concurrent.ThreadPoolTaskScheduler] - Initializing ExecutorService 'messageBrokerTaskScheduler'
2023-06-08 15:46:30.688 INFO  [restartedMain] [o.s.s.concurrent.ThreadPoolTaskExecutor] - Initializing ExecutorService 'brokerChannelExecutor'
2023-06-08 15:46:30.976 WARN  [restartedMain] [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration$JpaWebMvcConfiguration] - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-08 15:46:31.026 INFO  [restartedMain] [o.s.b.a.w.s.WelcomePageHandlerMapping] - Adding welcome page: ServletContext resource [/index.html]
2023-06-08 15:46:31.879 INFO  [restartedMain] [o.s.b.d.a.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2023-06-08 15:46:31.896 INFO  [restartedMain] [o.s.b.a.e.web.EndpointLinksResolver] - Exposing 16 endpoint(s) beneath base path '/actuator'
2023-06-08 15:46:31.982 INFO  [restartedMain] [o.s.m.s.b.SimpleBrokerMessageHandler] - Starting...
2023-06-08 15:46:31.982 INFO  [restartedMain] [o.s.m.s.b.SimpleBrokerMessageHandler] - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [DefaultSubscriptionRegistry[cache[0 destination(s)], registry[0 sessions]]]]
2023-06-08 15:46:31.983 INFO  [restartedMain] [o.s.m.s.b.SimpleBrokerMessageHandler] - Started.
2023-06-08 15:46:31.990 INFO  [restartedMain] [o.s.s.concurrent.ThreadPoolTaskScheduler] - Initializing ExecutorService
2023-06-08 15:46:31.992 INFO  [restartedMain] [o.apache.coyote.http11.Http11NioProtocol] - Starting ProtocolHandler ["http-nio-10010"]
2023-06-08 15:46:32.030 INFO  [restartedMain] [o.s.b.w.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 10010 (http) with context path ''
2023-06-08 15:46:32.034 INFO  [restartedMain] [com.pjy.dashboard.PjyApplication] - Started PjyApplication in 8.452 seconds (JVM running for 11.836)
2023-06-08 15:46:32.034 INFO  [restartedMain] [com.pjy.dashboard.AppStartedListener] - =====================
2023-06-08 15:46:32.034 INFO  [restartedMain] [com.pjy.dashboard.AppStartedListener] - Application started
2023-06-08 15:46:32.034 INFO  [restartedMain] [com.pjy.dashboard.AppStartedListener] - =====================
2023-06-08 15:46:32.848 INFO  [RMI TCP Connection(10)-127.0.0.1] [o.a.c.c.C.[Tomcat].[localhost].[/]] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-08 15:46:32.848 INFO  [RMI TCP Connection(10)-127.0.0.1] [o.s.web.servlet.DispatcherServlet] - Initializing Servlet 'dispatcherServlet'
2023-06-08 15:46:32.861 INFO  [RMI TCP Connection(10)-127.0.0.1] [o.s.web.servlet.DispatcherServlet] - Completed initialization in 13 ms
2023-06-08 15:47:30.695 INFO  [MessageBroker-1] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2023-06-08 15:57:41.642 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.MemberServiceImpl] - ROLE_ADMIN
2023-06-08 15:57:41.701 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.MemberServiceImpl] - pass:$2a$10$MNrQAPw.4k9j2y08eTmYEeI7oKPuaWbA97HHog.8PYep5HsRwhbae,$2a$10$juHIQ1BJeItanbAyZsLjzekWOGcKCVpuVtykCOcHoRcqYhmLcUEQe
2023-06-08 15:57:41.763 INFO  [http-nio-10010-exec-1] [c.p.d.configuration.SecurityConfig] - authentication:: p00139
2023-06-08 15:57:41.787 INFO  [UserConnection-1] [com.pjy.dashboard.service.ChatService] - # sise thread start : [p00139]
2023-06-08 15:57:41.787 INFO  [UserConnection-1] [com.pjy.dashboard.service.ChatService] - # sise threaditemList = null 
2023-06-08 15:57:43.960 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 16:01:09.913 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 16:01:51.126 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 16:09:33.033 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 16:10:02.043 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 16:10:11.884 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 16:11:57.389 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 16:13:00.720 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 16:13:20.523 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 16:13:34.376 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 16:14:08.929 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 16:15:20.915 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 16:16:13.197 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 16:17:30.693 INFO  [MessageBroker-1] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 2, active threads = 1, queued tasks = 0, completed tasks = 1]
2023-06-08 16:17:39.965 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 16:18:03.983 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 16:18:06.797 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '5-1번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '5-1번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 16:18:06.801 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT '[5-1번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '5-1번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 16:18:06.802 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '5-1번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.INIT_SEQ = 0 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 16:18:06.804 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '5-1번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '5-1번' ) b ORDER BY b.prev_daily_seq
2023-06-08 16:18:07.061 INFO  [http-nio-10010-exec-1] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@1b406281
2023-06-08 16:18:07.061 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '5-1번' AND     BASE_YM = '2023-05'
2023-06-08 16:18:07.082 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 16:42:16.648 INFO  [restartedMain] [com.pjy.dashboard.PjyApplication] - Starting PjyApplication on DESKTOP-3O1I9JM with PID 27420 (C:\BUS\multimodule-parent\dashboard\target\classes started by admin in C:\BUS\multimodule-parent\dashboard)
2023-06-08 16:42:16.651 INFO  [restartedMain] [com.pjy.dashboard.PjyApplication] - The following profiles are active: oauth
2023-06-08 16:42:16.696 INFO  [restartedMain] [o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor] - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-06-08 16:42:16.697 INFO  [restartedMain] [o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor] - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-06-08 16:42:17.503 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode!
2023-06-08 16:42:17.503 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-08 16:42:17.601 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 92ms. Found 2 JPA repository interfaces.
2023-06-08 16:42:17.856 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode!
2023-06-08 16:42:17.856 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2023-06-08 16:42:17.891 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationExtensionSupport] - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.pjy.dashboard.core.dao.jpa.h2.MemberRepository. If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2023-06-08 16:42:17.891 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationExtensionSupport] - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.pjy.dashboard.core.dao.jpa.h2.RememberMeRepository. If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2023-06-08 16:42:17.891 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 35ms. Found 0 JDBC repository interfaces.
2023-06-08 16:42:18.192 INFO  [restartedMain] [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] - Post-processing PropertySource instances
2023-06-08 16:42:18.238 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2023-06-08 16:42:18.238 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource commandLineArgs [org.springframework.core.env.SimpleCommandLinePropertySource] to EncryptableEnumerablePropertySourceWrapper
2023-06-08 16:42:18.239 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource servletConfigInitParams [org.springframework.core.env.PropertySource$StubPropertySource] to EncryptablePropertySourceWrapper
2023-06-08 16:42:18.239 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource servletContextInitParams [org.springframework.core.env.PropertySource$StubPropertySource] to EncryptablePropertySourceWrapper
2023-06-08 16:42:18.239 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2023-06-08 16:42:18.239 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableSystemEnvironmentPropertySourceWrapper
2023-06-08 16:42:18.239 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2023-06-08 16:42:18.239 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource applicationConfig: [classpath:/application-oauth.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2023-06-08 16:42:18.239 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2023-06-08 16:42:18.239 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource devtools [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2023-06-08 16:42:18.239 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource class path resource [pjy.properties] [org.springframework.core.env.CompositePropertySource] to EncryptableEnumerablePropertySourceWrapper
2023-06-08 16:42:18.239 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource class path resource [common.properties] [org.springframework.core.io.support.ResourcePropertySource] to EncryptableMapPropertySourceWrapper
2023-06-08 16:42:18.286 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'asyncConfiguration' of type [com.pjy.dashboard.configuration.AsyncConfiguration$$EnhancerBySpringCGLIB$$d73d721b] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 16:42:18.320 INFO  [restartedMain] [c.u.j.filter.DefaultLazyPropertyFilter] - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2023-06-08 16:42:18.381 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration$$EnhancerBySpringCGLIB$$c133d648] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 16:42:18.446 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 16:42:18.448 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@bf549b' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 16:42:18.452 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration$$EnhancerBySpringCGLIB$$e60878fa] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 16:42:18.459 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'org.springframework.security.config.annotation.method.configuration.Jsr250MetadataSourceConfiguration' of type [org.springframework.security.config.annotation.method.configuration.Jsr250MetadataSourceConfiguration$$EnhancerBySpringCGLIB$$b5d9110] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 16:42:18.461 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'jsr250MethodSecurityMetadataSource' of type [org.springframework.security.access.annotation.Jsr250MethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 16:42:18.462 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 16:42:18.476 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$28860e0e] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 16:42:18.495 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'org.springframework.hateoas.config.HateoasConfiguration' of type [org.springframework.hateoas.config.HateoasConfiguration$$EnhancerBySpringCGLIB$$a8065b40] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 16:42:18.576 INFO  [restartedMain] [c.u.j.r.DefaultLazyPropertyResolver] - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2023-06-08 16:42:18.580 INFO  [restartedMain] [c.u.j.d.DefaultLazyPropertyDetector] - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2023-06-08 16:42:18.890 INFO  [restartedMain] [o.s.b.w.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 10010 (http)
2023-06-08 16:42:18.903 INFO  [restartedMain] [o.apache.coyote.http11.Http11NioProtocol] - Initializing ProtocolHandler ["http-nio-10010"]
2023-06-08 16:42:18.909 INFO  [restartedMain] [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2023-06-08 16:42:18.909 INFO  [restartedMain] [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.29]
2023-06-08 16:42:19.124 INFO  [restartedMain] [org.apache.jasper.servlet.TldScanner] - At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.
2023-06-08 16:42:19.130 INFO  [restartedMain] [o.a.c.c.C.[Tomcat].[localhost].[/]] - Initializing Spring embedded WebApplicationContext
2023-06-08 16:42:19.130 INFO  [restartedMain] [o.s.web.context.ContextLoader] - Root WebApplicationContext: initialization completed in 2433 ms
2023-06-08 16:42:19.661 INFO  [restartedMain] [c.u.j.encryptor.DefaultLazyEncryptor] - Found Custom Encryptor Bean org.jasypt.encryption.pbe.PooledPBEStringEncryptor@26e55447 with name: jasyptStringEncryptor
2023-06-08 16:42:19.693 INFO  [restartedMain] [com.zaxxer.hikari.HikariDataSource] - H2 - Starting...
2023-06-08 16:42:19.756 INFO  [restartedMain] [com.zaxxer.hikari.HikariDataSource] - H2 - Start completed.
2023-06-08 16:42:20.224 INFO  [restartedMain] [com.pjy.dashboard.filter.TestFilter] - init Pjy Filter
2023-06-08 16:42:20.478 INFO  [restartedMain] [o.hibernate.jpa.internal.util.LogHelper] - HHH000204: Processing PersistenceUnitInfo [
	name: default
	...]
2023-06-08 16:42:20.534 INFO  [restartedMain] [org.hibernate.Version] - HHH000412: Hibernate Core {5.3.14.Final}
2023-06-08 16:42:20.536 INFO  [restartedMain] [org.hibernate.cfg.Environment] - HHH000206: hibernate.properties not found
2023-06-08 16:42:20.654 INFO  [restartedMain] [org.hibernate.annotations.common.Version] - HCANN000001: Hibernate Commons Annotations {5.0.4.Final}
2023-06-08 16:42:20.829 INFO  [restartedMain] [org.hibernate.dialect.Dialect] - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-06-08 16:42:21.399 INFO  [restartedMain] [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-08 16:42:21.598 INFO  [restartedMain] [o.h.h.i.QueryTranslatorFactoryInitiator] - HHH000397: Using ASTQueryTranslatorFactory
2023-06-08 16:42:21.806 INFO  [restartedMain] [o.s.s.concurrent.ThreadPoolTaskExecutor] - Initializing ExecutorService 'clientInboundChannelExecutor'
2023-06-08 16:42:21.815 INFO  [restartedMain] [o.s.s.concurrent.ThreadPoolTaskExecutor] - Initializing ExecutorService 'clientOutboundChannelExecutor'
2023-06-08 16:42:22.515 INFO  [restartedMain] [o.s.s.concurrent.ThreadPoolTaskExecutor] - Initializing ExecutorService
2023-06-08 16:42:22.516 INFO  [restartedMain] [o.s.s.concurrent.ThreadPoolTaskExecutor] - Initializing ExecutorService 'asyncThreadPool'
2023-06-08 16:42:22.645 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/h2-console/**'], []
2023-06-08 16:42:22.646 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/css/**'], []
2023-06-08 16:42:22.646 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/js/**'], []
2023-06-08 16:42:22.646 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/monitor/**'], []
2023-06-08 16:42:22.646 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/img/**'], []
2023-06-08 16:42:22.646 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/lib/**'], []
2023-06-08 16:42:22.646 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/main.css'], []
2023-06-08 16:42:22.646 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/common.js'], []
2023-06-08 16:42:22.646 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/resources/**'], []
2023-06-08 16:42:22.755 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@668720bc, org.springframework.security.web.context.SecurityContextPersistenceFilter@7f1c774, org.springframework.security.web.header.HeaderWriterFilter@3f9e8f5b, org.springframework.web.filter.CorsFilter@67e2222c, org.springframework.security.web.authentication.logout.LogoutFilter@57ae69d5, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@71050ecd, org.springframework.security.web.session.ConcurrentSessionFilter@3b74b625, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@25c9e7d1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7eb997c2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@287ccb9c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1f415aef, org.springframework.security.web.session.SessionManagementFilter@67c86747, org.springframework.security.web.access.ExceptionTranslationFilter@56fef81e, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7e01940a]
2023-06-08 16:42:22.774 INFO  [restartedMain] [o.s.aop.framework.CglibAopProxy] - Unable to proxy interface-implementing method [public final void org.springframework.web.filter.GenericFilterBean.init(javax.servlet.FilterConfig) throws javax.servlet.ServletException] because it is marked as final: Consider using interface-based JDK proxies instead!
2023-06-08 16:42:22.811 INFO  [restartedMain] [o.s.s.concurrent.ThreadPoolTaskScheduler] - Initializing ExecutorService 'messageBrokerTaskScheduler'
2023-06-08 16:42:22.854 INFO  [restartedMain] [o.s.s.concurrent.ThreadPoolTaskExecutor] - Initializing ExecutorService 'brokerChannelExecutor'
2023-06-08 16:42:23.194 WARN  [restartedMain] [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration$JpaWebMvcConfiguration] - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-08 16:42:23.244 INFO  [restartedMain] [o.s.b.a.w.s.WelcomePageHandlerMapping] - Adding welcome page: ServletContext resource [/index.html]
2023-06-08 16:42:24.134 INFO  [restartedMain] [o.s.b.d.a.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2023-06-08 16:42:24.152 INFO  [restartedMain] [o.s.b.a.e.web.EndpointLinksResolver] - Exposing 16 endpoint(s) beneath base path '/actuator'
2023-06-08 16:42:24.243 INFO  [restartedMain] [o.s.m.s.b.SimpleBrokerMessageHandler] - Starting...
2023-06-08 16:42:24.243 INFO  [restartedMain] [o.s.m.s.b.SimpleBrokerMessageHandler] - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [DefaultSubscriptionRegistry[cache[0 destination(s)], registry[0 sessions]]]]
2023-06-08 16:42:24.244 INFO  [restartedMain] [o.s.m.s.b.SimpleBrokerMessageHandler] - Started.
2023-06-08 16:42:24.251 INFO  [restartedMain] [o.s.s.concurrent.ThreadPoolTaskScheduler] - Initializing ExecutorService
2023-06-08 16:42:24.253 INFO  [restartedMain] [o.apache.coyote.http11.Http11NioProtocol] - Starting ProtocolHandler ["http-nio-10010"]
2023-06-08 16:42:24.293 INFO  [restartedMain] [o.s.b.w.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 10010 (http) with context path ''
2023-06-08 16:42:24.296 INFO  [restartedMain] [com.pjy.dashboard.PjyApplication] - Started PjyApplication in 7.957 seconds (JVM running for 8.772)
2023-06-08 16:42:24.297 INFO  [restartedMain] [com.pjy.dashboard.AppStartedListener] - =====================
2023-06-08 16:42:24.297 INFO  [restartedMain] [com.pjy.dashboard.AppStartedListener] - Application started
2023-06-08 16:42:24.297 INFO  [restartedMain] [com.pjy.dashboard.AppStartedListener] - =====================
2023-06-08 16:42:25.036 INFO  [RMI TCP Connection(10)-127.0.0.1] [o.a.c.c.C.[Tomcat].[localhost].[/]] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-08 16:42:25.037 INFO  [RMI TCP Connection(10)-127.0.0.1] [o.s.web.servlet.DispatcherServlet] - Initializing Servlet 'dispatcherServlet'
2023-06-08 16:42:25.049 INFO  [RMI TCP Connection(10)-127.0.0.1] [o.s.web.servlet.DispatcherServlet] - Completed initialization in 12 ms
2023-06-08 16:43:22.858 INFO  [MessageBroker-1] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2023-06-08 16:52:20.779 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.MemberServiceImpl] - ROLE_ADMIN
2023-06-08 16:52:20.840 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.MemberServiceImpl] - pass:$2a$10$MNrQAPw.4k9j2y08eTmYEeI7oKPuaWbA97HHog.8PYep5HsRwhbae,$2a$10$NbBok5363WAAkc9KR9XnA.PUID0fbs3Tgdd3X12avl/apvMuR1ZtS
2023-06-08 16:52:20.902 INFO  [http-nio-10010-exec-7] [c.p.d.configuration.SecurityConfig] - authentication:: p00139
2023-06-08 16:52:20.924 INFO  [UserConnection-1] [com.pjy.dashboard.service.ChatService] - # sise thread start : [p00139]
2023-06-08 16:52:20.924 INFO  [UserConnection-1] [com.pjy.dashboard.service.ChatService] - # sise threaditemList = null 
2023-06-08 16:52:33.290 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 17:20:10.198 WARN  [H2 housekeeper] [com.zaxxer.hikari.pool.HikariPool] - H2 - Thread starvation or clock leap detected (housekeeper delta=12m20s42ms5µs400ns).
2023-06-08 17:21:04.312 WARN  [H2 housekeeper] [com.zaxxer.hikari.pool.HikariPool] - H2 - Thread starvation or clock leap detected (housekeeper delta=54s218ms816µs999ns).
2023-06-08 17:25:36.897 INFO  [MessageBroker-1] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 2, active threads = 1, queued tasks = 0, completed tasks = 1]
2023-06-08 20:19:20.401 WARN  [H2 housekeeper] [com.zaxxer.hikari.pool.HikariPool] - H2 - Thread starvation or clock leap detected (housekeeper delta=2h48m46s47ms287µs600ns).
2023-06-08 20:19:37.050 INFO  [Catalina-utility-2] [c.pjy.dashboard.listener.SessionListener] - updateUserCloseTime p00139 
2023-06-08 20:19:37.050 INFO  [Catalina-utility-2] [c.pjy.dashboard.listener.SessionListener] - currentSessionUserList ->  false
2023-06-08 20:19:37.050 INFO  [Catalina-utility-2] [c.pjy.dashboard.listener.SessionListener] - updateUserCloseTime p00139 
2023-06-08 20:19:37.050 INFO  [Catalina-utility-2] [c.pjy.dashboard.listener.SessionListener] - currentSessionUserList ->  false
2023-06-08 20:19:37.065 INFO  [UserConnection-1] [com.pjy.dashboard.service.ChatService] - # sise thread stop # 사용자접속정보 없음
2023-06-08 20:19:37.065 INFO  [UserConnection-1] [com.pjy.dashboard.service.ChatService] - ## thread end sise . UserConnection-1[88]
2023-06-08 20:21:06.271 INFO  [http-nio-10010-exec-5] [c.p.d.interceptor.LoggerInterceptor] - ============================== START ==============================
2023-06-08 20:21:06.271 INFO  [http-nio-10010-exec-5] [c.p.d.interceptor.LoggerInterceptor] -  Class       	:  class org.springframework.web.method.HandlerMethod
2023-06-08 20:21:06.271 INFO  [http-nio-10010-exec-5] [c.p.d.interceptor.LoggerInterceptor] -  Request URI 	:  /
2023-06-08 20:21:06.271 INFO  [http-nio-10010-exec-5] [c.p.d.interceptor.LoggerInterceptor] -  Request addr	:  0:0:0:0:0:0:0:1
2023-06-08 20:21:06.271 INFO  [http-nio-10010-exec-5] [c.p.d.interceptor.LoggerInterceptor] -  Servlet URI 	:  /
2023-06-08 20:21:06.279 ERROR [http-nio-10010-exec-5] [o.a.c.c.C.[Tomcat].[localhost].[/].[jsp]] - Servlet.service() for servlet [jsp] threw exception
java.lang.IllegalStateException: Cannot create a session after the response has been committed
	at org.apache.catalina.connector.Request.doGetSession(Request.java:2993)
	at org.apache.catalina.connector.Request.getSession(Request.java:2432)
	at org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:908)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:244)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:582)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:527)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at org.apache.jasper.runtime.PageContextImpl.initialize(PageContextImpl.java:133)
	at org.apache.jasper.runtime.JspFactoryImpl.internalGetPageContext(JspFactoryImpl.java:109)
	at org.apache.jasper.runtime.JspFactoryImpl.getPageContext(JspFactoryImpl.java:60)
	at org.apache.jsp.WEB_002dINF.jsp.home_jsp._jspService(home_jsp.java:121)
	at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:477)
	at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:385)
	at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:329)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:712)
	at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:580)
	at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:516)
	at org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequestDispatcher.include(HeaderWriterFilter.java:149)
	at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:163)
	at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:317)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1372)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1118)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1057)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.servlet.resource.ResourceUrlEncodingFilter.doFilter(ResourceUrlEncodingFilter.java:64)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.boot.actuate.web.trace.servlet.HttpTraceFilter.doFilterInternal(HttpTraceFilter.java:88)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:155)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:97)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:74)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.security.web.FilterChainProxy$$FastClassBySpringCGLIB$$f101c706.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at com.pjy.dashboard.aop.LogAspect.handleRequestRejectedException(LogAspect.java:147)
	at jdk.internal.reflect.GeneratedMethodAccessor149.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
	at org.springframework.security.web.FilterChainProxy$$EnhancerBySpringCGLIB$$97282794.doFilter(<generated>)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:114)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:104)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:526)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1591)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
2023-06-08 20:21:06.282 ERROR [http-nio-10010-exec-5] [o.a.c.c.C.[.[.[/].[dispatcherServlet]] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [javax.servlet.ServletException: java.lang.IllegalStateException: Cannot create a session after the response has been committed] with root cause
java.lang.IllegalStateException: Cannot create a session after the response has been committed
	at org.apache.catalina.connector.Request.doGetSession(Request.java:2993)
	at org.apache.catalina.connector.Request.getSession(Request.java:2432)
	at org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:908)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:244)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:582)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:527)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at org.apache.jasper.runtime.PageContextImpl.initialize(PageContextImpl.java:133)
	at org.apache.jasper.runtime.JspFactoryImpl.internalGetPageContext(JspFactoryImpl.java:109)
	at org.apache.jasper.runtime.JspFactoryImpl.getPageContext(JspFactoryImpl.java:60)
	at org.apache.jsp.WEB_002dINF.jsp.home_jsp._jspService(home_jsp.java:121)
	at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:477)
	at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:385)
	at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:329)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:712)
	at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:580)
	at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:516)
	at org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequestDispatcher.include(HeaderWriterFilter.java:149)
	at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:163)
	at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:317)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1372)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1118)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1057)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.servlet.resource.ResourceUrlEncodingFilter.doFilter(ResourceUrlEncodingFilter.java:64)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.boot.actuate.web.trace.servlet.HttpTraceFilter.doFilterInternal(HttpTraceFilter.java:88)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:155)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:97)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:74)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.security.web.FilterChainProxy$$FastClassBySpringCGLIB$$f101c706.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at com.pjy.dashboard.aop.LogAspect.handleRequestRejectedException(LogAspect.java:147)
	at jdk.internal.reflect.GeneratedMethodAccessor149.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
	at org.springframework.security.web.FilterChainProxy$$EnhancerBySpringCGLIB$$97282794.doFilter(<generated>)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:114)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:104)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:526)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1591)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
2023-06-08 20:21:06.284 INFO  [http-nio-10010-exec-5] [c.p.d.interceptor.LoggerInterceptor] - ============================== START ==============================
2023-06-08 20:21:06.285 INFO  [http-nio-10010-exec-5] [c.p.d.interceptor.LoggerInterceptor] -  Class       	:  class org.springframework.web.method.HandlerMethod
2023-06-08 20:21:06.285 INFO  [http-nio-10010-exec-5] [c.p.d.interceptor.LoggerInterceptor] -  Request URI 	:  /error
2023-06-08 20:21:06.285 INFO  [http-nio-10010-exec-5] [c.p.d.interceptor.LoggerInterceptor] -  Request addr	:  0:0:0:0:0:0:0:1
2023-06-08 20:21:06.285 INFO  [http-nio-10010-exec-5] [c.p.d.interceptor.LoggerInterceptor] -  Servlet URI 	:  /error
2023-06-08 20:21:06.371 ERROR [http-nio-10010-exec-5] [o.a.c.c.C.[Tomcat].[localhost].[/].[jsp]] - Servlet.service() for servlet [jsp] threw exception
java.lang.IllegalStateException: Cannot create a session after the response has been committed
	at org.apache.catalina.connector.Request.doGetSession(Request.java:2993)
	at org.apache.catalina.connector.Request.getSession(Request.java:2432)
	at org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:908)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:244)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:582)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:244)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:582)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:527)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at org.apache.jasper.runtime.PageContextImpl.initialize(PageContextImpl.java:133)
	at org.apache.jasper.runtime.JspFactoryImpl.internalGetPageContext(JspFactoryImpl.java:109)
	at org.apache.jasper.runtime.JspFactoryImpl.getPageContext(JspFactoryImpl.java:60)
	at org.apache.jsp.WEB_002dINF.jsp.error_jsp._jspService(error_jsp.java:107)
	at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:477)
	at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:385)
	at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:329)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:712)
	at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:580)
	at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:516)
	at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:163)
	at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:317)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1372)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1118)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1057)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.servlet.resource.ResourceUrlEncodingFilter.doFilter(ResourceUrlEncodingFilter.java:64)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:84)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:155)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.security.web.FilterChainProxy$$FastClassBySpringCGLIB$$f101c706.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at com.pjy.dashboard.aop.LogAspect.handleRequestRejectedException(LogAspect.java:147)
	at jdk.internal.reflect.GeneratedMethodAccessor149.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
	at org.springframework.security.web.FilterChainProxy$$EnhancerBySpringCGLIB$$97282794.doFilter(<generated>)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:712)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:461)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:384)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:312)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:394)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:253)
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:348)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:173)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1591)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
2023-06-08 20:21:06.372 ERROR [http-nio-10010-exec-5] [o.a.c.c.C.[.[.[/].[dispatcherServlet]] - Servlet.service() for servlet [dispatcherServlet] threw exception
java.lang.IllegalStateException: Cannot create a session after the response has been committed
	at org.apache.catalina.connector.Request.doGetSession(Request.java:2993)
	at org.apache.catalina.connector.Request.getSession(Request.java:2432)
	at org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:908)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:244)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:582)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:244)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:582)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:527)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at org.apache.jasper.runtime.PageContextImpl.initialize(PageContextImpl.java:133)
	at org.apache.jasper.runtime.JspFactoryImpl.internalGetPageContext(JspFactoryImpl.java:109)
	at org.apache.jasper.runtime.JspFactoryImpl.getPageContext(JspFactoryImpl.java:60)
	at org.apache.jsp.WEB_002dINF.jsp.error_jsp._jspService(error_jsp.java:107)
	at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:477)
	at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:385)
	at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:329)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:712)
	at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:580)
	at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:516)
	at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:163)
	at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:317)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1372)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1118)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1057)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.servlet.resource.ResourceUrlEncodingFilter.doFilter(ResourceUrlEncodingFilter.java:64)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:84)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:155)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.security.web.FilterChainProxy$$FastClassBySpringCGLIB$$f101c706.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at com.pjy.dashboard.aop.LogAspect.handleRequestRejectedException(LogAspect.java:147)
	at jdk.internal.reflect.GeneratedMethodAccessor149.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
	at org.springframework.security.web.FilterChainProxy$$EnhancerBySpringCGLIB$$97282794.doFilter(<generated>)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:712)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:461)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:384)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:312)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:394)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:253)
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:348)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:173)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1591)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
2023-06-08 20:21:06.373 ERROR [http-nio-10010-exec-5] [o.a.c.c.C.[Tomcat].[localhost]] - Exception Processing ErrorPage[errorCode=0, location=/error]
org.apache.jasper.JasperException: javax.servlet.ServletException: java.lang.IllegalStateException: Cannot create a session after the response has been committed
	at org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:639)
	at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:500)
	at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:385)
	at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:329)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:712)
	at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:580)
	at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:516)
	at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:163)
	at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:317)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1372)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1118)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1057)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.servlet.resource.ResourceUrlEncodingFilter.doFilter(ResourceUrlEncodingFilter.java:64)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:84)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:155)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.security.web.FilterChainProxy$$FastClassBySpringCGLIB$$f101c706.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at com.pjy.dashboard.aop.LogAspect.handleRequestRejectedException(LogAspect.java:147)
	at jdk.internal.reflect.GeneratedMethodAccessor149.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
	at org.springframework.security.web.FilterChainProxy$$EnhancerBySpringCGLIB$$97282794.doFilter(<generated>)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:712)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:461)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:384)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:312)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:394)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:253)
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:348)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:173)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1591)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: javax.servlet.ServletException: java.lang.IllegalStateException: Cannot create a session after the response has been committed
	at org.apache.jsp.WEB_002dINF.jsp.error_jsp._jspService(error_jsp.java:144)
	at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:477)
	... 97 common frames omitted
Caused by: java.lang.IllegalStateException: Cannot create a session after the response has been committed
	at org.apache.catalina.connector.Request.doGetSession(Request.java:2993)
	at org.apache.catalina.connector.Request.getSession(Request.java:2432)
	at org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:908)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:244)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:582)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:244)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:582)
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:527)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:253)
	at org.apache.jasper.runtime.PageContextImpl.initialize(PageContextImpl.java:133)
	at org.apache.jasper.runtime.JspFactoryImpl.internalGetPageContext(JspFactoryImpl.java:109)
	at org.apache.jasper.runtime.JspFactoryImpl.getPageContext(JspFactoryImpl.java:60)
	at org.apache.jsp.WEB_002dINF.jsp.error_jsp._jspService(error_jsp.java:107)
	... 100 common frames omitted
2023-06-08 20:21:07.671 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.MemberServiceImpl] - ROLE_ADMIN
2023-06-08 20:21:07.731 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.MemberServiceImpl] - pass:$2a$10$MNrQAPw.4k9j2y08eTmYEeI7oKPuaWbA97HHog.8PYep5HsRwhbae,$2a$10$mg6evfkH.Ib9fZUr7l9E1OKbM4eyN4Or7cNtMQkU8FO5TnpHekIue
2023-06-08 20:21:07.792 INFO  [http-nio-10010-exec-1] [c.p.d.configuration.SecurityConfig] - authentication:: p00139
2023-06-08 20:21:07.793 INFO  [UserConnection-2] [com.pjy.dashboard.service.ChatService] - # sise thread start : [p00139]
2023-06-08 20:21:07.793 INFO  [UserConnection-2] [com.pjy.dashboard.service.ChatService] - # sise threaditemList = null 
2023-06-08 20:21:10.711 INFO  [http-nio-10010-exec-3] [c.pjy.dashboard.controller.JspController] - C: 회원정보수정 GET의 아이디 p00139
2023-06-08 20:22:09.801 INFO  [http-nio-10010-exec-4] [c.pjy.dashboard.controller.JspController] - C: 회원정보수정 GET의 아이디 p00139
2023-06-08 20:24:02.752 INFO  [http-nio-10010-exec-4] [c.pjy.dashboard.controller.JspController] - C: 회원정보수정 GET의 아이디 p00139
2023-06-08 20:30:51.827 INFO  [http-nio-10010-exec-3] [c.pjy.dashboard.controller.JspController] - C: 회원정보수정 GET의 아이디 p00139
2023-06-08 20:31:37.455 INFO  [MessageBroker-2] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 3, active threads = 1, queued tasks = 0, completed tasks = 2]
2023-06-08 20:31:37.455 INFO  [MessageBroker-1] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 4, active threads = 3, queued tasks = 0, completed tasks = 2]
2023-06-08 20:31:37.455 INFO  [MessageBroker-3] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 5, active threads = 4, queued tasks = 0, completed tasks = 3]
2023-06-08 20:31:37.456 INFO  [MessageBroker-4] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 6, active threads = 4, queued tasks = 0, completed tasks = 4]
2023-06-08 20:31:37.456 INFO  [MessageBroker-1] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 7, active threads = 4, queued tasks = 0, completed tasks = 5]
2023-06-08 20:31:37.456 INFO  [MessageBroker-2] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 8, active threads = 4, queued tasks = 0, completed tasks = 6]
2023-06-08 20:31:56.579 INFO  [http-nio-10010-exec-2] [c.pjy.dashboard.controller.JspController] - C: 회원정보수정 GET의 아이디 p00139
2023-06-08 20:32:55.008 INFO  [http-nio-10010-exec-1] [c.pjy.dashboard.controller.JspController] - C: 회원정보수정 GET의 아이디 p00139
2023-06-08 20:33:06.648 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 20:35:22.009 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 20:43:21.406 INFO  [MessageBroker-5] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 9, active threads = 1, queued tasks = 0, completed tasks = 8]
2023-06-08 21:13:21.404 INFO  [MessageBroker-3] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 10, active threads = 1, queued tasks = 0, completed tasks = 9]
2023-06-08 21:20:54.334 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 21:21:17.151 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 21:21:53.024 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 21:22:18.008 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 21:22:37.519 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 21:43:21.403 INFO  [MessageBroker-6] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 11, active threads = 1, queued tasks = 0, completed tasks = 10]
2023-06-08 21:45:27.759 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 21:46:14.841 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-06' AND 	a.route_nm = '@routeNm' AND 	a.INIT_SEQ > 0
2023-06-08 21:46:14.841 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 21:46:23.632 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.MemberServiceImpl] - ROLE_ADMIN
2023-06-08 21:46:23.693 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.MemberServiceImpl] - pass:$2a$10$MNrQAPw.4k9j2y08eTmYEeI7oKPuaWbA97HHog.8PYep5HsRwhbae,$2a$10$GlrwZvU53aYpimdDOQtDve9gt99Ku1muxPrY7PZnT4J8KKT68UDYm
2023-06-08 21:46:23.754 INFO  [http-nio-10010-exec-9] [c.p.d.configuration.SecurityConfig] - authentication:: p00139
2023-06-08 21:46:26.815 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-06' AND 	a.route_nm = '@routeNm' AND 	a.INIT_SEQ > 0
2023-06-08 21:46:26.815 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 21:47:51.035 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.MemberServiceImpl] - ROLE_ADMIN
2023-06-08 21:47:51.095 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.MemberServiceImpl] - pass:$2a$10$MNrQAPw.4k9j2y08eTmYEeI7oKPuaWbA97HHog.8PYep5HsRwhbae,$2a$10$Low2fhQyePoBCdlGsJ/SWeDZ3e2KXsMrs8vSfH/.wnoFYg1RUKkO2
2023-06-08 21:47:51.155 INFO  [http-nio-10010-exec-6] [c.p.d.configuration.SecurityConfig] - authentication:: p00139
2023-06-08 21:47:52.578 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-06' AND 	a.route_nm = '@routeNm' AND 	a.INIT_SEQ > 0
2023-06-08 21:47:52.578 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 21:50:38.339 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 21:50:41.847 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 21:50:44.684 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '38번' AND 	a.INIT_SEQ > 0
2023-06-08 21:50:44.685 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 21:50:44.689 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 21:50:44.690 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.INIT_SEQ = 0 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 21:50:44.693 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 21:50:45.022 INFO  [http-nio-10010-exec-8] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 21:50:45.022 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 21:50:45.050 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 21:51:54.055 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 21:51:57.095 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 21:51:58.671 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '38번' AND 	a.INIT_SEQ > 0
2023-06-08 21:51:58.673 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 21:51:58.678 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 21:51:58.679 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.INIT_SEQ = 0 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 21:51:58.681 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 21:51:59.035 INFO  [http-nio-10010-exec-7] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 21:51:59.035 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 21:51:59.062 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 21:52:29.746 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.MemberServiceImpl] - ROLE_ADMIN
2023-06-08 21:52:29.806 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.MemberServiceImpl] - pass:$2a$10$MNrQAPw.4k9j2y08eTmYEeI7oKPuaWbA97HHog.8PYep5HsRwhbae,$2a$10$9rDX.IYF6mX18w.NMj/7we.H2KIBYjlnzTXfvoXIxCKj/g.Y7cSBe
2023-06-08 21:52:29.865 INFO  [http-nio-10010-exec-8] [c.p.d.configuration.SecurityConfig] - authentication:: p00139
2023-06-08 21:52:32.029 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 21:52:34.609 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 21:52:36.310 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '38번' AND 	a.INIT_SEQ > 0
2023-06-08 21:52:36.310 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 21:52:36.315 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 21:52:36.316 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.INIT_SEQ = 0 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 21:52:36.317 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 21:52:36.637 INFO  [http-nio-10010-exec-2] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 21:52:36.637 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 21:52:36.664 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 21:52:54.146 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 21:52:56.898 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 21:52:58.516 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '38번' AND 	a.INIT_SEQ > 0
2023-06-08 21:52:58.516 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 21:52:58.519 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 21:52:58.520 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.INIT_SEQ = 0 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 21:52:58.521 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 21:52:58.932 INFO  [http-nio-10010-exec-8] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 21:52:58.933 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 21:52:58.964 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:06:41.192 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '20번' AND 	a.INIT_SEQ > 0
2023-06-08 22:06:41.192 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:06:41.196 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:06:41.196 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.INIT_SEQ = 0 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:06:41.198 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:06:41.544 INFO  [http-nio-10010-exec-8] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 22:06:41.545 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 22:06:41.574 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:08:18.021 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 22:08:20.349 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-06' AND 	a.route_nm = '20번' AND 	a.INIT_SEQ > 0
2023-06-08 22:08:20.349 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-06' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-06' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:08:20.355 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-06월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-06' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:08:20.355 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-06' AND    b.DISPATCH_SEQ = 6 AND    b.INIT_SEQ = 0 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:08:20.356 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-06' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-06' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:08:29.260 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:08:43.991 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '20번' AND 	a.INIT_SEQ > 0
2023-06-08 22:08:43.992 ERROR [http-nio-10010-exec-10] [c.p.dashboard.controller.TestController] - java.lang.NumberFormatException: empty String
2023-06-08 22:09:12.114 ERROR [http-nio-10010-exec-3] [c.p.dashboard.controller.TestController] - java.lang.NumberFormatException: empty String
2023-06-08 22:09:12.118 ERROR [http-nio-10010-exec-1] [c.p.d.core.error.GlobalExceptionHandler] - handleEntityNotFoundException
com.google.gson.JsonSyntaxException: java.lang.NumberFormatException: empty String
	at com.google.gson.internal.bind.TypeAdapters$7.read(TypeAdapters.java:228)
	at com.google.gson.internal.bind.TypeAdapters$7.read(TypeAdapters.java:218)
	at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.read(ReflectiveTypeAdapterFactory.java:131)
	at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:222)
	at com.google.gson.Gson.fromJson(Gson.java:932)
	at com.google.gson.Gson.fromJson(Gson.java:897)
	at com.google.gson.Gson.fromJson(Gson.java:846)
	at com.google.gson.Gson.fromJson(Gson.java:817)
	at com.pjy.dashboard.controller.TestController.selectOracelSessionUserDetail(TestController.java:434)
	at jdk.internal.reflect.GeneratedMethodAccessor161.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:893)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:798)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.servlet.resource.ResourceUrlEncodingFilter.doFilter(ResourceUrlEncodingFilter.java:64)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.boot.actuate.web.trace.servlet.HttpTraceFilter.doFilterInternal(HttpTraceFilter.java:88)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:155)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:97)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:74)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.security.web.FilterChainProxy$$FastClassBySpringCGLIB$$f101c706.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at com.pjy.dashboard.aop.LogAspect.handleRequestRejectedException(LogAspect.java:147)
	at jdk.internal.reflect.GeneratedMethodAccessor149.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
	at org.springframework.security.web.FilterChainProxy$$EnhancerBySpringCGLIB$$97282794.doFilter(<generated>)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:114)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:104)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:526)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1591)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: java.lang.NumberFormatException: empty String
	at java.base/jdk.internal.math.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1842)
	at java.base/jdk.internal.math.FloatingDecimal.parseDouble(FloatingDecimal.java:110)
	at java.base/java.lang.Double.parseDouble(Double.java:651)
	at com.google.gson.stream.JsonReader.nextInt(JsonReader.java:1202)
	at com.google.gson.internal.bind.TypeAdapters$7.read(TypeAdapters.java:226)
	... 130 common frames omitted
2023-06-08 22:09:12.134 WARN  [http-nio-10010-exec-1] [o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver] - Resolved [com.google.gson.JsonSyntaxException: java.lang.NumberFormatException: empty String]
2023-06-08 22:10:35.071 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 22:10:37.657 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-06' AND 	a.route_nm = '' AND 	a.INIT_SEQ > 0
2023-06-08 22:10:44.717 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:11:22.425 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '20번' AND 	a.INIT_SEQ > 0
2023-06-08 22:11:22.426 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:11:22.429 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:11:22.430 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.INIT_SEQ = 0 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:11:22.431 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:11:22.825 INFO  [http-nio-10010-exec-9] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 22:11:22.825 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 22:11:22.851 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:11:26.278 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 22:11:31.957 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 22:11:34.762 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:11:36.685 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '20번' AND 	a.INIT_SEQ > 0
2023-06-08 22:11:36.685 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:11:36.689 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT '[20번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:11:36.689 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '20번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.INIT_SEQ = 0 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:11:36.691 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '20번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '20번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:11:37.029 INFO  [http-nio-10010-exec-5] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@c85b8114
2023-06-08 22:11:37.029 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '20번' AND     BASE_YM = '2023-05'
2023-06-08 22:11:37.056 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:11:49.029 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '38번' AND 	a.INIT_SEQ > 0
2023-06-08 22:11:49.029 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:11:49.033 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:11:49.033 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.INIT_SEQ = 0 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:11:49.034 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:11:49.351 INFO  [http-nio-10010-exec-2] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 22:11:49.351 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 22:11:49.378 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:11:53.225 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '38번' AND 	a.INIT_SEQ > 0
2023-06-08 22:11:53.225 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:11:53.228 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:11:53.229 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.INIT_SEQ = 0 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:11:53.231 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:11:53.554 INFO  [http-nio-10010-exec-1] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@44f61876
2023-06-08 22:11:53.554 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 22:11:53.577 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:12:10.901 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '38번' AND 	a.INIT_SEQ > 0
2023-06-08 22:12:10.901 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:12:10.904 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:12:10.904 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.INIT_SEQ = 0 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:12:10.905 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:12:11.239 INFO  [http-nio-10010-exec-10] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 22:12:11.240 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 22:12:11.268 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:12:33.391 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '38번' AND 	a.INIT_SEQ > 0
2023-06-08 22:12:33.391 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:12:33.396 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:12:33.396 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.INIT_SEQ = 0 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:12:33.397 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:12:33.771 INFO  [http-nio-10010-exec-5] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@44f61876
2023-06-08 22:12:33.771 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 22:12:33.795 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:13:21.407 INFO  [MessageBroker-4] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 12, active threads = 1, queued tasks = 0, completed tasks = 11]
2023-06-08 22:13:30.072 INFO  [RMI TCP Connection(171)-127.0.0.1] [o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin] - Application shutdown requested.
2023-06-08 22:13:30.074 INFO  [RMI TCP Connection(171)-127.0.0.1] [o.s.m.s.b.SimpleBrokerMessageHandler] - Stopping...
2023-06-08 22:13:30.074 INFO  [RMI TCP Connection(171)-127.0.0.1] [o.s.m.s.b.SimpleBrokerMessageHandler] - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [DefaultSubscriptionRegistry[cache[0 destination(s)], registry[0 sessions]]]]
2023-06-08 22:13:30.074 INFO  [RMI TCP Connection(171)-127.0.0.1] [o.s.m.s.b.SimpleBrokerMessageHandler] - Stopped.
2023-06-08 22:13:30.097 INFO  [RMI TCP Connection(171)-127.0.0.1] [o.s.s.concurrent.ThreadPoolTaskExecutor] - Shutting down ExecutorService 'brokerChannelExecutor'
2023-06-08 22:13:30.097 INFO  [RMI TCP Connection(171)-127.0.0.1] [o.s.s.concurrent.ThreadPoolTaskScheduler] - Shutting down ExecutorService 'messageBrokerTaskScheduler'
2023-06-08 22:13:30.099 INFO  [RMI TCP Connection(171)-127.0.0.1] [o.s.s.concurrent.ThreadPoolTaskExecutor] - Shutting down ExecutorService 'asyncThreadPool'
2023-06-08 22:13:30.099 INFO  [UserConnection-2] [com.pjy.dashboard.service.ChatService] - ## thread end sise . UserConnection-2[117]
2023-06-08 22:13:30.100 INFO  [RMI TCP Connection(171)-127.0.0.1] [o.s.s.concurrent.ThreadPoolTaskExecutor] - Shutting down ExecutorService 'clientOutboundChannelExecutor'
2023-06-08 22:13:30.100 INFO  [RMI TCP Connection(171)-127.0.0.1] [o.s.s.concurrent.ThreadPoolTaskExecutor] - Shutting down ExecutorService 'clientInboundChannelExecutor'
2023-06-08 22:13:30.101 INFO  [RMI TCP Connection(171)-127.0.0.1] [com.zaxxer.hikari.HikariDataSource] - H2 - Shutdown initiated...
2023-06-08 22:13:30.104 INFO  [RMI TCP Connection(171)-127.0.0.1] [com.zaxxer.hikari.HikariDataSource] - H2 - Shutdown completed.
2023-06-08 22:13:30.132 INFO  [RMI TCP Connection(171)-127.0.0.1] [com.pjy.dashboard.filter.TestFilter] - destroy Pjy Filter
2023-06-08 22:13:32.337 INFO  [restartedMain] [com.pjy.dashboard.PjyApplication] - Starting PjyApplication on DESKTOP-3O1I9JM with PID 34044 (C:\BUS\multimodule-parent\dashboard\target\classes started by admin in C:\BUS\multimodule-parent\dashboard)
2023-06-08 22:13:32.339 INFO  [restartedMain] [com.pjy.dashboard.PjyApplication] - The following profiles are active: oauth
2023-06-08 22:13:32.376 INFO  [restartedMain] [o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor] - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-06-08 22:13:32.377 INFO  [restartedMain] [o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor] - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-06-08 22:13:33.158 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode!
2023-06-08 22:13:33.158 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-08 22:13:33.260 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 96ms. Found 2 JPA repository interfaces.
2023-06-08 22:13:33.499 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode!
2023-06-08 22:13:33.500 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2023-06-08 22:13:33.536 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationExtensionSupport] - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.pjy.dashboard.core.dao.jpa.h2.MemberRepository. If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2023-06-08 22:13:33.536 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationExtensionSupport] - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.pjy.dashboard.core.dao.jpa.h2.RememberMeRepository. If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2023-06-08 22:13:33.536 INFO  [restartedMain] [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 36ms. Found 0 JDBC repository interfaces.
2023-06-08 22:13:33.841 INFO  [restartedMain] [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] - Post-processing PropertySource instances
2023-06-08 22:13:33.886 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2023-06-08 22:13:33.886 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource commandLineArgs [org.springframework.core.env.SimpleCommandLinePropertySource] to EncryptableEnumerablePropertySourceWrapper
2023-06-08 22:13:33.886 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource servletConfigInitParams [org.springframework.core.env.PropertySource$StubPropertySource] to EncryptablePropertySourceWrapper
2023-06-08 22:13:33.886 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource servletContextInitParams [org.springframework.core.env.PropertySource$StubPropertySource] to EncryptablePropertySourceWrapper
2023-06-08 22:13:33.887 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2023-06-08 22:13:33.887 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableSystemEnvironmentPropertySourceWrapper
2023-06-08 22:13:33.887 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2023-06-08 22:13:33.887 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource applicationConfig: [classpath:/application-oauth.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2023-06-08 22:13:33.887 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2023-06-08 22:13:33.887 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource devtools [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2023-06-08 22:13:33.887 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource class path resource [pjy.properties] [org.springframework.core.env.CompositePropertySource] to EncryptableEnumerablePropertySourceWrapper
2023-06-08 22:13:33.887 INFO  [restartedMain] [c.u.j.EncryptablePropertySourceConverter] - Converting PropertySource class path resource [common.properties] [org.springframework.core.io.support.ResourcePropertySource] to EncryptableMapPropertySourceWrapper
2023-06-08 22:13:33.934 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'asyncConfiguration' of type [com.pjy.dashboard.configuration.AsyncConfiguration$$EnhancerBySpringCGLIB$$e132b6cc] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 22:13:33.968 INFO  [restartedMain] [c.u.j.filter.DefaultLazyPropertyFilter] - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2023-06-08 22:13:34.027 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration$$EnhancerBySpringCGLIB$$cb291af9] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 22:13:34.084 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 22:13:34.086 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@7cdad27d' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 22:13:34.089 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration$$EnhancerBySpringCGLIB$$effdbdab] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 22:13:34.095 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'org.springframework.security.config.annotation.method.configuration.Jsr250MetadataSourceConfiguration' of type [org.springframework.security.config.annotation.method.configuration.Jsr250MetadataSourceConfiguration$$EnhancerBySpringCGLIB$$1552d5c1] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 22:13:34.102 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'jsr250MethodSecurityMetadataSource' of type [org.springframework.security.access.annotation.Jsr250MethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 22:13:34.103 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 22:13:34.114 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$327b52bf] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 22:13:34.132 INFO  [restartedMain] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] - Bean 'org.springframework.hateoas.config.HateoasConfiguration' of type [org.springframework.hateoas.config.HateoasConfiguration$$EnhancerBySpringCGLIB$$b1fb9ff1] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-08 22:13:34.212 INFO  [restartedMain] [c.u.j.r.DefaultLazyPropertyResolver] - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2023-06-08 22:13:34.215 INFO  [restartedMain] [c.u.j.d.DefaultLazyPropertyDetector] - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2023-06-08 22:13:34.496 INFO  [restartedMain] [o.s.b.w.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 10010 (http)
2023-06-08 22:13:34.509 INFO  [restartedMain] [o.apache.coyote.http11.Http11NioProtocol] - Initializing ProtocolHandler ["http-nio-10010"]
2023-06-08 22:13:34.515 INFO  [restartedMain] [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2023-06-08 22:13:34.515 INFO  [restartedMain] [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.29]
2023-06-08 22:13:34.724 INFO  [restartedMain] [org.apache.jasper.servlet.TldScanner] - At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.
2023-06-08 22:13:34.731 INFO  [restartedMain] [o.a.c.c.C.[Tomcat].[localhost].[/]] - Initializing Spring embedded WebApplicationContext
2023-06-08 22:13:34.731 INFO  [restartedMain] [o.s.web.context.ContextLoader] - Root WebApplicationContext: initialization completed in 2354 ms
2023-06-08 22:13:35.246 INFO  [restartedMain] [c.u.j.encryptor.DefaultLazyEncryptor] - Found Custom Encryptor Bean org.jasypt.encryption.pbe.PooledPBEStringEncryptor@5c11f8cb with name: jasyptStringEncryptor
2023-06-08 22:13:35.278 INFO  [restartedMain] [com.zaxxer.hikari.HikariDataSource] - H2 - Starting...
2023-06-08 22:13:35.338 INFO  [restartedMain] [com.zaxxer.hikari.HikariDataSource] - H2 - Start completed.
2023-06-08 22:13:35.819 INFO  [restartedMain] [com.pjy.dashboard.filter.TestFilter] - init Pjy Filter
2023-06-08 22:13:36.061 INFO  [restartedMain] [o.hibernate.jpa.internal.util.LogHelper] - HHH000204: Processing PersistenceUnitInfo [
	name: default
	...]
2023-06-08 22:13:36.122 INFO  [restartedMain] [org.hibernate.Version] - HHH000412: Hibernate Core {5.3.14.Final}
2023-06-08 22:13:36.123 INFO  [restartedMain] [org.hibernate.cfg.Environment] - HHH000206: hibernate.properties not found
2023-06-08 22:13:36.231 INFO  [restartedMain] [org.hibernate.annotations.common.Version] - HCANN000001: Hibernate Commons Annotations {5.0.4.Final}
2023-06-08 22:13:36.405 INFO  [restartedMain] [org.hibernate.dialect.Dialect] - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-06-08 22:13:36.905 INFO  [restartedMain] [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-08 22:13:37.087 INFO  [restartedMain] [o.h.h.i.QueryTranslatorFactoryInitiator] - HHH000397: Using ASTQueryTranslatorFactory
2023-06-08 22:13:37.270 INFO  [restartedMain] [o.s.s.concurrent.ThreadPoolTaskExecutor] - Initializing ExecutorService 'clientInboundChannelExecutor'
2023-06-08 22:13:37.281 INFO  [restartedMain] [o.s.s.concurrent.ThreadPoolTaskExecutor] - Initializing ExecutorService 'clientOutboundChannelExecutor'
2023-06-08 22:13:37.919 INFO  [restartedMain] [o.s.s.concurrent.ThreadPoolTaskExecutor] - Initializing ExecutorService
2023-06-08 22:13:37.920 INFO  [restartedMain] [o.s.s.concurrent.ThreadPoolTaskExecutor] - Initializing ExecutorService 'asyncThreadPool'
2023-06-08 22:13:38.062 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/h2-console/**'], []
2023-06-08 22:13:38.062 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/css/**'], []
2023-06-08 22:13:38.062 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/js/**'], []
2023-06-08 22:13:38.062 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/monitor/**'], []
2023-06-08 22:13:38.062 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/img/**'], []
2023-06-08 22:13:38.062 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/lib/**'], []
2023-06-08 22:13:38.062 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/main.css'], []
2023-06-08 22:13:38.062 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/common.js'], []
2023-06-08 22:13:38.062 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: Ant [pattern='/resources/**'], []
2023-06-08 22:13:38.169 INFO  [restartedMain] [o.s.s.web.DefaultSecurityFilterChain] - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@9c4eba0, org.springframework.security.web.context.SecurityContextPersistenceFilter@6ee2ef1a, org.springframework.security.web.header.HeaderWriterFilter@292f3b80, org.springframework.web.filter.CorsFilter@428c4c2, org.springframework.security.web.authentication.logout.LogoutFilter@85845b4, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@5ffff302, org.springframework.security.web.session.ConcurrentSessionFilter@71e2bde4, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@6bd490f9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3491da10, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@51e8de30, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4efc31b3, org.springframework.security.web.session.SessionManagementFilter@2618b75d, org.springframework.security.web.access.ExceptionTranslationFilter@65f76470, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@d3e8010]
2023-06-08 22:13:38.191 INFO  [restartedMain] [o.s.aop.framework.CglibAopProxy] - Unable to proxy interface-implementing method [public final void org.springframework.web.filter.GenericFilterBean.init(javax.servlet.FilterConfig) throws javax.servlet.ServletException] because it is marked as final: Consider using interface-based JDK proxies instead!
2023-06-08 22:13:38.221 INFO  [restartedMain] [o.s.s.concurrent.ThreadPoolTaskScheduler] - Initializing ExecutorService 'messageBrokerTaskScheduler'
2023-06-08 22:13:38.261 INFO  [restartedMain] [o.s.s.concurrent.ThreadPoolTaskExecutor] - Initializing ExecutorService 'brokerChannelExecutor'
2023-06-08 22:13:38.543 WARN  [restartedMain] [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration$JpaWebMvcConfiguration] - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-08 22:13:38.591 INFO  [restartedMain] [o.s.b.a.w.s.WelcomePageHandlerMapping] - Adding welcome page: ServletContext resource [/index.html]
2023-06-08 22:13:39.463 INFO  [restartedMain] [o.s.b.d.a.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2023-06-08 22:13:39.482 INFO  [restartedMain] [o.s.b.a.e.web.EndpointLinksResolver] - Exposing 16 endpoint(s) beneath base path '/actuator'
2023-06-08 22:13:39.568 INFO  [restartedMain] [o.s.m.s.b.SimpleBrokerMessageHandler] - Starting...
2023-06-08 22:13:39.569 INFO  [restartedMain] [o.s.m.s.b.SimpleBrokerMessageHandler] - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [DefaultSubscriptionRegistry[cache[0 destination(s)], registry[0 sessions]]]]
2023-06-08 22:13:39.569 INFO  [restartedMain] [o.s.m.s.b.SimpleBrokerMessageHandler] - Started.
2023-06-08 22:13:39.576 INFO  [restartedMain] [o.s.s.concurrent.ThreadPoolTaskScheduler] - Initializing ExecutorService
2023-06-08 22:13:39.577 INFO  [restartedMain] [o.apache.coyote.http11.Http11NioProtocol] - Starting ProtocolHandler ["http-nio-10010"]
2023-06-08 22:13:39.613 INFO  [restartedMain] [o.s.b.w.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 10010 (http) with context path ''
2023-06-08 22:13:39.616 INFO  [restartedMain] [com.pjy.dashboard.PjyApplication] - Started PjyApplication in 7.583 seconds (JVM running for 8.368)
2023-06-08 22:13:39.617 INFO  [restartedMain] [com.pjy.dashboard.AppStartedListener] - =====================
2023-06-08 22:13:39.617 INFO  [restartedMain] [com.pjy.dashboard.AppStartedListener] - Application started
2023-06-08 22:13:39.617 INFO  [restartedMain] [com.pjy.dashboard.AppStartedListener] - =====================
2023-06-08 22:13:40.654 INFO  [RMI TCP Connection(9)-127.0.0.1] [o.a.c.c.C.[Tomcat].[localhost].[/]] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-08 22:13:40.654 INFO  [RMI TCP Connection(9)-127.0.0.1] [o.s.web.servlet.DispatcherServlet] - Initializing Servlet 'dispatcherServlet'
2023-06-08 22:13:40.667 INFO  [RMI TCP Connection(9)-127.0.0.1] [o.s.web.servlet.DispatcherServlet] - Completed initialization in 13 ms
2023-06-08 22:14:18.527 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 22:14:20.437 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:14:22.241 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '38번' AND 	a.INIT_SEQ > 0
2023-06-08 22:14:22.242 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:14:22.247 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:14:22.248 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.INIT_SEQ = 0 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:14:22.251 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:14:22.603 INFO  [http-nio-10010-exec-1] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 22:14:22.604 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 22:14:22.631 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:14:38.263 INFO  [MessageBroker-1] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2023-06-08 22:14:56.186 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '38번' AND 	a.INIT_SEQ > 0
2023-06-08 22:14:56.187 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:14:56.191 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:14:56.192 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.INIT_SEQ = 0 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:14:56.193 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:20:37.434 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 22:20:39.532 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-06' AND 	a.route_nm = '38번' AND 	a.INIT_SEQ > 0
2023-06-08 22:21:05.962 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-06' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-06' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:21:05.978 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-06월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-06' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:21:05.983 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-06' AND    b.DISPATCH_SEQ = 6 AND    b.INIT_SEQ = 0 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:21:05.995 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-06' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-06' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:21:21.321 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:22:25.298 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 22:22:29.040 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '' AND 	a.INIT_SEQ > 0
2023-06-08 22:22:29.040 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:24:36.817 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 22:24:39.549 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:24:45.565 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '38번' AND 	a.INIT_SEQ > 0
2023-06-08 22:24:58.376 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:24:58.381 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:24:58.382 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.INIT_SEQ = 0 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:24:58.383 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:24:58.758 INFO  [http-nio-10010-exec-6] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 22:24:58.758 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 22:24:58.783 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:25:12.893 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:25:12.909 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:25:12.915 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.INIT_SEQ = 0 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:25:12.927 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:31:45.463 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:31:45.469 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:31:45.470 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.INIT_SEQ = 0 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:31:45.471 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:31:45.667 INFO  [http-nio-10010-exec-6] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@44f61876
2023-06-08 22:31:45.668 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 22:31:45.698 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:32:12.623 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:32:12.626 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:32:12.627 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.INIT_SEQ = 0 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:32:12.629 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:32:12.968 INFO  [http-nio-10010-exec-5] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 22:32:12.968 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 22:32:12.995 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:33:21.874 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:33:21.879 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:33:21.880 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.INIT_SEQ = 0 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:33:21.881 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:33:22.052 INFO  [http-nio-10010-exec-10] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@44f61876
2023-06-08 22:33:22.052 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 22:33:22.077 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:44:38.268 INFO  [MessageBroker-1] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 2, active threads = 1, queued tasks = 0, completed tasks = 1]
2023-06-08 22:46:43.994 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 22:46:46.391 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:46:46.814 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '20번' AND 	a.INIT_SEQ > 0
2023-06-08 22:46:47.297 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '21번' AND 	a.INIT_SEQ > 0
2023-06-08 22:46:47.487 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '27번' AND 	a.INIT_SEQ > 0
2023-06-08 22:46:47.664 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '38번' AND 	a.INIT_SEQ > 0
2023-06-08 22:47:10.477 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:47:10.481 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:47:10.481 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:47:10.482 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:47:10.837 INFO  [http-nio-10010-exec-3] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 22:47:10.838 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 22:47:10.865 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:48:29.310 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 22:48:31.796 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:48:33.742 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '38번' AND 	a.INIT_SEQ > 0
2023-06-08 22:48:33.742 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:48:33.762 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:48:33.763 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:48:33.764 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:48:34.116 INFO  [http-nio-10010-exec-5] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 22:48:34.116 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 22:48:34.144 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:48:38.744 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:48:38.749 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:48:38.750 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:48:38.751 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:48:39.202 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:51:07.763 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 22:51:10.384 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:51:12.246 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '38번' AND 	a.INIT_SEQ > 0
2023-06-08 22:51:12.246 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:51:12.249 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:51:12.251 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:51:12.252 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = '@init_seq' AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = '@init_seq' AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:51:12.290 ERROR [http-nio-10010-exec-7] [c.p.dashboard.controller.TestController] - StatementCallback; SQL [WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = '@init_seq' AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = '@init_seq' AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq]; Data conversion error converting "@init_seq"; SQL statement:
WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = '@init_seq' AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = '@init_seq' AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq [22018-200]; nested exception is org.h2.jdbc.JdbcSQLDataException: Data conversion error converting "@init_seq"; SQL statement:
WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = '@init_seq' AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = '@init_seq' AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq [22018-200]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:457)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:429)
	at org.h2.message.DbException.get(DbException.java:194)
	at org.h2.value.Value.convertTo(Value.java:875)
	at org.h2.value.Value.convertTo(Value.java:772)
	at org.h2.expression.condition.Comparison.optimize(Comparison.java:221)
	at org.h2.expression.condition.ConditionAndOr.optimize(ConditionAndOr.java:136)
	at org.h2.expression.condition.ConditionAndOr.optimize(ConditionAndOr.java:135)
	at org.h2.command.dml.Select.prepare(Select.java:1209)
	at org.h2.table.TableView.createQueryColumnTemplateList(TableView.java:786)
	at org.h2.command.Parser.parseSingleCommonTableExpression(Parser.java:6866)
	at org.h2.command.Parser.parseWith1(Parser.java:6737)
	at org.h2.command.Parser.parseWith(Parser.java:6722)
	at org.h2.command.Parser.parseWithStatementOrQuery(Parser.java:2633)
	at org.h2.command.Parser.parsePrepared(Parser.java:872)
	at org.h2.command.Parser.parse(Parser.java:843)
	at org.h2.command.Parser.parse(Parser.java:815)
	at org.h2.command.Parser.prepareCommand(Parser.java:738)
	at org.h2.engine.Session.prepareLocal(Session.java:657)
	at org.h2.server.TcpServerThread.process(TcpServerThread.java:278)
	at org.h2.server.TcpServerThread.run(TcpServerThread.java:183)
	at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NumberFormatException: For input string: "@init_seq"
	at java.lang.NumberFormatException.forInputString(Unknown Source)
	at java.lang.Integer.parseInt(Unknown Source)
	at java.lang.Integer.parseInt(Unknown Source)
	at org.h2.value.Value.convertToInt(Value.java:982)
	at org.h2.value.Value.convertTo(Value.java:806)
	... 18 more

2023-06-08 22:51:18.229 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '38번' AND 	a.INIT_SEQ > 0
2023-06-08 22:51:18.229 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:51:18.235 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:51:18.235 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:51:18.236 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = '@init_seq' AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = '@init_seq' AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:51:18.238 ERROR [http-nio-10010-exec-9] [c.p.dashboard.controller.TestController] - StatementCallback; SQL [WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = '@init_seq' AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = '@init_seq' AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq]; Data conversion error converting "@init_seq"; SQL statement:
WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = '@init_seq' AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = '@init_seq' AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq [22018-200]; nested exception is org.h2.jdbc.JdbcSQLDataException: Data conversion error converting "@init_seq"; SQL statement:
WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = '@init_seq' AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = '@init_seq' AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq [22018-200]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:457)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:429)
	at org.h2.message.DbException.get(DbException.java:194)
	at org.h2.value.Value.convertTo(Value.java:875)
	at org.h2.value.Value.convertTo(Value.java:772)
	at org.h2.expression.condition.Comparison.optimize(Comparison.java:221)
	at org.h2.expression.condition.ConditionAndOr.optimize(ConditionAndOr.java:136)
	at org.h2.expression.condition.ConditionAndOr.optimize(ConditionAndOr.java:135)
	at org.h2.command.dml.Select.prepare(Select.java:1209)
	at org.h2.table.TableView.createQueryColumnTemplateList(TableView.java:786)
	at org.h2.command.Parser.parseSingleCommonTableExpression(Parser.java:6866)
	at org.h2.command.Parser.parseWith1(Parser.java:6737)
	at org.h2.command.Parser.parseWith(Parser.java:6722)
	at org.h2.command.Parser.parseWithStatementOrQuery(Parser.java:2633)
	at org.h2.command.Parser.parsePrepared(Parser.java:872)
	at org.h2.command.Parser.parse(Parser.java:843)
	at org.h2.command.Parser.parse(Parser.java:815)
	at org.h2.command.Parser.prepareCommand(Parser.java:738)
	at org.h2.engine.Session.prepareLocal(Session.java:657)
	at org.h2.server.TcpServerThread.process(TcpServerThread.java:278)
	at org.h2.server.TcpServerThread.run(TcpServerThread.java:183)
	at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NumberFormatException: For input string: "@init_seq"
	at java.lang.NumberFormatException.forInputString(Unknown Source)
	at java.lang.Integer.parseInt(Unknown Source)
	at java.lang.Integer.parseInt(Unknown Source)
	at org.h2.value.Value.convertToInt(Value.java:982)
	at org.h2.value.Value.convertTo(Value.java:806)
	... 18 more

2023-06-08 22:51:33.442 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 22:51:35.537 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:51:37.167 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '38번' AND 	a.INIT_SEQ > 0
2023-06-08 22:51:37.167 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:51:37.172 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:51:37.172 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:51:37.174 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = '@init_seq' AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = '@init_seq' AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:51:37.176 ERROR [http-nio-10010-exec-6] [c.p.dashboard.controller.TestController] - StatementCallback; SQL [WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = '@init_seq' AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = '@init_seq' AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq]; Data conversion error converting "@init_seq"; SQL statement:
WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = '@init_seq' AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = '@init_seq' AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq [22018-200]; nested exception is org.h2.jdbc.JdbcSQLDataException: Data conversion error converting "@init_seq"; SQL statement:
WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = '@init_seq' AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = '@init_seq' AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq [22018-200]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:457)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:429)
	at org.h2.message.DbException.get(DbException.java:194)
	at org.h2.value.Value.convertTo(Value.java:875)
	at org.h2.value.Value.convertTo(Value.java:772)
	at org.h2.expression.condition.Comparison.optimize(Comparison.java:221)
	at org.h2.expression.condition.ConditionAndOr.optimize(ConditionAndOr.java:136)
	at org.h2.expression.condition.ConditionAndOr.optimize(ConditionAndOr.java:135)
	at org.h2.command.dml.Select.prepare(Select.java:1209)
	at org.h2.table.TableView.createQueryColumnTemplateList(TableView.java:786)
	at org.h2.command.Parser.parseSingleCommonTableExpression(Parser.java:6866)
	at org.h2.command.Parser.parseWith1(Parser.java:6737)
	at org.h2.command.Parser.parseWith(Parser.java:6722)
	at org.h2.command.Parser.parseWithStatementOrQuery(Parser.java:2633)
	at org.h2.command.Parser.parsePrepared(Parser.java:872)
	at org.h2.command.Parser.parse(Parser.java:843)
	at org.h2.command.Parser.parse(Parser.java:815)
	at org.h2.command.Parser.prepareCommand(Parser.java:738)
	at org.h2.engine.Session.prepareLocal(Session.java:657)
	at org.h2.server.TcpServerThread.process(TcpServerThread.java:278)
	at org.h2.server.TcpServerThread.run(TcpServerThread.java:183)
	at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NumberFormatException: For input string: "@init_seq"
	at java.lang.NumberFormatException.forInputString(Unknown Source)
	at java.lang.Integer.parseInt(Unknown Source)
	at java.lang.Integer.parseInt(Unknown Source)
	at org.h2.value.Value.convertToInt(Value.java:982)
	at org.h2.value.Value.convertTo(Value.java:806)
	... 18 more

2023-06-08 22:51:54.945 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 22:51:56.933 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:51:58.390 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '38번' AND 	a.INIT_SEQ > 0
2023-06-08 22:51:58.390 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:51:58.394 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:51:58.395 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:51:58.395 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = '0' AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = '0' AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:51:58.770 INFO  [http-nio-10010-exec-6] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 22:51:58.770 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 22:51:58.800 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:52:06.414 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:52:06.418 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:52:06.418 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:52:06.419 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = '1' AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = '1' AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:52:06.843 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:52:42.190 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 2 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 2 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:52:42.194 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 2 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:52:42.195 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 2 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:52:42.196 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = '2' AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = '2' AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:52:42.647 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:54:15.753 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '38번' AND 	a.INIT_SEQ > 0
2023-06-08 22:54:15.753 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:54:15.758 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:54:15.759 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:54:15.760 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:54:16.087 INFO  [http-nio-10010-exec-10] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 22:54:16.087 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 22:54:16.112 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:54:18.272 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 3 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 3 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:54:18.277 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 3 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:54:18.278 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 3 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:54:18.279 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 3 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 3 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:54:18.728 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:54:57.592 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '38번' AND 	a.INIT_SEQ > 0
2023-06-08 22:54:57.592 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:54:57.595 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:54:57.596 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:54:57.597 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:54:57.926 INFO  [http-nio-10010-exec-6] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 22:54:57.926 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 22:54:57.951 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:55:40.288 INFO  [http-nio-10010-exec-3] [com.pjy.dashboard.dao.DynamicSqlDao] - getupdateSql_arrangeDetail sql : update  TBL_MONTH_ARRANGE_DETAIL   set    d1  = :d1          ,d2  = :d2          ,d3  = :d3          ,d4  = :d4          ,d5  = :d5          ,d6  = :d6          ,d7  = :d7          ,d8  = :d8          ,d9  = :d9          ,d10 = :d10         ,d11 = :d11         ,d12 = :d12         ,d13 = :d13         ,d14 = :d14         ,d15 = :d15         ,d16 = :d16         ,d17 = :d17         ,d18 = :d18         ,d19 = :d19         ,d20 = :d20         ,d21 = :d21         ,d22 = :d22         ,d23 = :d23         ,d24 = :d24         ,d25 = :d25         ,d26 = :d26         ,d27 = :d27         ,d28 = :d28         ,d29 = :d29         ,d30 = :d30         ,d31 = :d31 	where company_no = '100' and BASE_YM = '2023-05' and route_nm = '38번' and car_regno = :car_regno and emp_nm = :emp_nm and dispatch_seq = 6 
2023-06-08 22:55:40.311 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '38번' AND 	a.INIT_SEQ > 0
2023-06-08 22:55:40.311 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:55:40.315 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:55:40.315 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:55:40.317 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:55:40.767 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:55:46.019 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:55:46.030 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '38번' AND 	a.INIT_SEQ > 0
2023-06-08 22:55:46.030 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:55:46.033 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:55:46.034 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:55:46.035 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:55:46.484 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:55:52.380 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '38번' AND 	a.INIT_SEQ > 0
2023-06-08 22:55:52.380 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:55:52.383 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:55:52.384 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:55:52.385 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:55:52.716 INFO  [http-nio-10010-exec-7] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@8616ba6a
2023-06-08 22:55:52.716 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 22:55:52.741 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:56:00.675 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:56:00.679 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:56:00.681 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:56:00.682 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 1 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 1 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:56:01.104 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:56:33.734 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '38번' AND 	a.INIT_SEQ > 0
2023-06-08 22:56:33.734 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:56:33.739 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:56:33.739 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:56:33.740 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:56:34.130 INFO  [http-nio-10010-exec-8] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@8616ba6a
2023-06-08 22:56:34.130 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 22:56:34.155 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:56:45.714 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:56:45.718 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:56:45.718 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:56:45.720 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 1 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 1 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:56:46.132 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:56:55.789 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 2 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 2 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:56:55.794 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 2 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:56:55.794 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 2 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:56:55.796 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 2 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 2 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:56:56.218 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:58:04.439 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 22:58:07.785 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:58:10.230 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '38번' AND 	a.INIT_SEQ > 0
2023-06-08 22:58:10.230 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:58:10.234 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:58:10.234 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:58:10.235 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:58:10.586 INFO  [http-nio-10010-exec-5] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 22:58:10.586 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 22:58:10.613 INFO  [http-nio-10010-exec-4] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:58:54.058 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:58:54.062 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:58:54.062 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 1 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:58:54.063 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 1 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 1 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:58:54.570 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 22:59:02.175 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 2 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 2 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 22:59:02.180 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 2 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 22:59:02.181 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 2 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 22:59:02.182 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 2 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 2 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 22:59:02.623 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 23:07:16.590 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : select   'N' as bit, a.* from    TBM_ROUTE_COMMON_INFO a where   a.company_no = '100' and		a.code = '휴가종류' order by a.route_nm
2023-06-08 23:07:18.554 INFO  [http-nio-10010-exec-1] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 23:07:20.429 INFO  [http-nio-10010-exec-3] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '38번' AND 	a.INIT_SEQ > 0
2023-06-08 23:07:20.429 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 23:07:20.432 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 23:07:20.433 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 23:07:20.434 INFO  [http-nio-10010-exec-5] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 23:07:20.784 INFO  [http-nio-10010-exec-10] [c.p.dashboard.controller.TestController] - com.pjy.dashboard.domain.CommonCodeVo@d5c178d5
2023-06-08 23:07:20.784 INFO  [http-nio-10010-exec-10] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT  'N' as bit,CAR_REGNO ,EMP_NM ,prev_daily_seq ,PREV_WORK_PATTERN ,ampm_gubun, off_group, CAR_REGNO||EMP_NM as key FROM TBM_DRIVERINFO_DETAIL where   company_no = '100' AND 	route_nm = '38번' AND     BASE_YM = '2023-05'
2023-06-08 23:07:20.809 INFO  [http-nio-10010-exec-2] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 23:07:34.929 INFO  [http-nio-10010-exec-9] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 23:07:34.939 INFO  [http-nio-10010-exec-8] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	DISTINCT INIT_SEQ  FROM 	TBL_MONTH_ARRANGE_BASIC a WHERE	a.COMPANY_NO = '100' AND 	a.BASE_YM = '2023-05' AND 	a.route_nm = '38번' AND 	a.INIT_SEQ > 0
2023-06-08 23:07:34.939 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH carInfo AS ( SELECT '감차후 총 차량댓수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 FROM 	TBL_MONTH_ARRANGE_BASIC b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 2  AND	b.CAR_REGNO  = '-' ), allocateInfo AS ( SELECT  '기사 배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D1 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D1 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D2 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D2 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D3 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D3 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D4 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D4 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D5 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D5 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D6 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D6 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D7 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D7 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D8 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D8 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D9 ,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D9 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D10,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D10 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D11,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D11 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D12,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D12 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D13,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D13 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D14,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D14 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D15,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D15 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D16,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D16 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D17,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D17 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D18,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D18 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D19,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D19 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D20,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D20 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D21,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D21 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D22,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D22 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D23,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D23 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D24,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D24 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D25,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D25 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D26,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D26 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D27,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D27 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.D28,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) D28 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d29,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d29 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d30,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d30 ,sum(CASE WHEN instr(REGEXP_REPLACE(b.d31,'[#!]','*') ,'*') > 0 THEN 0 ELSE 1 END) d31 FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6  AND 	CAR_REGNO not like 'SP%' ) SELECT * FROM carInfo union all SELECT '감차후 총 운행횟수' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1 *2   , b.D2 *2    , b.D3  *2   , b.D4 *2    , b.D5 *2    , b.D6 *2    , b.D7 *2    , b.D8 *2    , b.D9 *2    , b.D10 *2 , b.D11 *2    , b.D12 *2    , b.D13 *2    , b.D14 *2    , b.D15 *2    , b.D16 *2    , b.D17 *2    , b.D18 *2    , b.D19 *2    , b.D20 *2 , b.D21 *2    , b.D22 *2    , b.D23 *2    , b.D24 *2    , b.D25 *2    , b.D26 *2    , b.D27 *2    , b.D28 *2    , b.D29 *2    , b.D30 *2 , b.D31 *2 FROM 	carInfo b union all SELECT  * FROM 	allocateInfo b union all SELECT  '기사 미배정 건수' as CAR_REGNO,'-' emp_nm,0 AS tot_work_date ,(a.d1  *2)- b.d1 ,(a.D2  *2)- b.D2 ,(a.D3  *2)- b.D3 ,(a.D4  *2)- b.D4 ,(a.D5  *2)- b.D5 ,(a.D6  *2)- b.D6 ,(a.D7  *2)- b.D7 ,(a.D8  *2)- b.D8 ,(a.D9  *2)- b.D9 ,(a.D10 *2)- b.D10 ,(a.D11 *2)- b.D11 ,(a.D12 *2)- b.D12 ,(a.D13 *2)- b.D13 ,(a.D14 *2)- b.D14 ,(a.D15 *2)- b.D15 ,(a.D16 *2)- b.D16 ,(a.D17 *2)- b.D17 ,(a.D18 *2)- b.D18 ,(a.D19 *2)- b.D19 ,(a.D20 *2)- b.D20 ,(a.D21 *2)- b.D21 ,(a.D22 *2)- b.D22 ,(a.D23 *2)- b.D23 ,(a.D24 *2)- b.D24 ,(a.D25 *2)- b.D25 ,(a.D26 *2)- b.D26 ,(a.D27 *2)- b.D27 ,(a.D28 *2)- b.D28 ,(a.d29 *2)- b.d29 ,(a.d30 *2)- b.d30 ,(a.d31 *2)- b.d31 FROM 	allocateInfo b,carInfo a
2023-06-08 23:07:34.943 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT '[38번] 2023-05월'|| ' 배차현황' as CAR_REGNO,b.emp_nm,0 AS tot_work_date , b.D1    , b.D2    , b.D3    , b.D4    , b.D5    , b.D6    , b.D7    , b.D8    , b.D9    , b.D10 , b.D11    , b.D12    , b.D13    , b.D14    , b.D15    , b.D16    , b.D17    , b.D18    , b.D19    , b.D20 , b.D21    , b.D22    , b.D23    , b.D24    , b.D25    , b.D26    , b.D27    , b.D28    , b.D29    , b.D30 , b.D31 ,'N' as bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 1
2023-06-08 23:07:34.943 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - SELECT b.CAR_REGNO,b.emp_nm , 0 AS tot_work_date ,b.D1  ,b.D2  ,b.D3  ,b.D4  ,b.D5  ,b.D6  ,b.D7  ,b.D8  ,b.D9  ,b.D10 ,b.D11 ,b.D12 ,b.D13 ,b.D14 ,b.D15 ,b.D16 ,b.D17 ,b.D18 ,b.D19 ,b.D20 ,b.D21 ,b.D22 ,b.D23 ,b.D24 ,b.D25 ,b.D26 ,b.D27 ,b.D28 ,b.D29 ,b.D30 ,b.D31 ,'N' AS bit FROM 	TBL_MONTH_ARRANGE_DETAIL b WHERE 	b.company_no = '100' AND 	b.route_nm = '38번' AND    b.init_seq = 0 AND    b.BASE_YM = '2023-05' AND    b.DISPATCH_SEQ = 6 AND    b.CAR_REGNO not like 'SP%' order by b.dispatch_seq,b.CAR_REGNO ,b.ampm_gubun,b.prev_daily_seq
2023-06-08 23:07:34.944 INFO  [http-nio-10010-exec-7] [c.p.dashboard.service.DynamicSqlService] - WITH sp_maxinfo AS ( SELECT  b.CAR_REGNO,b.EMP_NM ,nvl(max(CASE WHEN nvl(b.D1 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D1   ELSE '#' || b.D1  end),' ') as D1 ,nvl(max(CASE WHEN nvl(b.D2 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' tHEN b.D2   ELSE '#' || b.D2  end),' ') as D2 ,nvl(max(CASE WHEN nvl(b.D3 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D3   ELSE '#' || b.D3   end),' ') as D3 ,nvl(max(CASE WHEN nvl(b.D4 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D4   ELSE '#' || b.D4   end),' ') as D4 ,nvl(max(CASE WHEN nvl(b.D5 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D5   ELSE '#' || b.D5   end),' ') as D5 ,nvl(max(CASE WHEN nvl(b.D6 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D6   ELSE '#' || b.D6   end),' ') as D6 ,nvl(max(CASE WHEN nvl(b.D7 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D7   ELSE '#' || b.D7   end),' ') as D7 ,nvl(max(CASE WHEN nvl(b.D8 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D8   ELSE '#' || b.D8   end),' ') as D8 ,nvl(max(CASE WHEN nvl(b.D9 ,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D9   ELSE '#' || b.D9   end),' ') as D9 ,nvl(max(CASE WHEN nvl(b.D10,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D10  ELSE '#' || b.D10  end),' ') as D10 ,nvl(max(CASE WHEN nvl(b.D11,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D11  ELSE '#' || b.D11  end),' ') as D11 ,nvl(max(CASE WHEN nvl(b.D12,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D12  ELSE '#' || b.D12  end),' ') as D12 ,nvl(max(CASE WHEN nvl(b.D13,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D13  ELSE '#' || b.D13  end),' ') as D13 ,nvl(max(CASE WHEN nvl(b.D14,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D14  ELSE '#' || b.D14  end),' ') as D14 ,nvl(max(CASE WHEN nvl(b.D15,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D15  ELSE '#' || b.D15  end),' ') as D15 ,nvl(max(CASE WHEN nvl(b.D16,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D16  ELSE '#' || b.D16  end),' ') as D16 ,nvl(max(CASE WHEN nvl(b.D17,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D17  ELSE '#' || b.D17  end),' ') as D17 ,nvl(max(CASE WHEN nvl(b.D18,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D18  ELSE '#' || b.D18  end),' ') as D18 ,nvl(max(CASE WHEN nvl(b.D19,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D19  ELSE '#' || b.D19  end),' ') as D19 ,nvl(max(CASE WHEN nvl(b.D20,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D20  ELSE '#' || b.D20  end),' ') as D20 ,nvl(max(CASE WHEN nvl(b.D21,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D21  ELSE '#' || b.D21  end),' ') as D21 ,nvl(max(CASE WHEN nvl(b.D22,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D22  ELSE '#' || b.D22  end),' ') as D22 ,nvl(max(CASE WHEN nvl(b.D23,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D23  ELSE '#' || b.D23  end),' ') as D23 ,nvl(max(CASE WHEN nvl(b.D24,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D24  ELSE '#' || b.D24  end),' ') as D24 ,nvl(max(CASE WHEN nvl(b.D25,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D25  ELSE '#' || b.D25  end),' ') as D25 ,nvl(max(CASE WHEN nvl(b.D26,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D26  ELSE '#' || b.D26  end),' ') as D26 ,nvl(max(CASE WHEN nvl(b.D27,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D27  ELSE '#' || b.D27  end),' ') as D27 ,nvl(max(CASE WHEN nvl(b.D28,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D28  ELSE '#' || b.D28  end),' ') as D28 ,nvl(max(CASE WHEN nvl(b.D29,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D29  ELSE '#' || b.D29  end),' ') as D29 ,nvl(max(CASE WHEN nvl(b.D30,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D30  ELSE '#' || b.D30  end),' ') as D30 ,nvl(max(CASE WHEN nvl(b.D31,' ') = ' ' THEN ' ' WHEN b.route_nm = '38번' THEN b.D31  ELSE '#' || b.D31  end),' ') as D31 FROM 	TBL_MONTH_ARRANGE_DETAIL b where 	b.company_no = '100' AND b.BASE_YM = '2023-05' and b.DISPATCH_SEQ = 6 and b.init_seq = 0 AND b.CAR_REGNO LIKE  'SP%' GROUP BY b.CAR_REGNO,b.emp_nm ) SELECT b.*,'N' as bit ,	LENGTH (REGEXP_REPLACE(b.D1||b.D2||b.D3||b.D4||b.D5||b.D6||b.D7||b.D8||b.D9||b.D10||b.D11||b.D12||b.D13||b.D14||b.D15||b.D16||b.D17||b.D18||b.D19||b.D20||b.D21||b.D22||b.D23||b.D24||b.D25||b.D26||b.D27||b.D28||b.D29||b.D30||b.D31,'[0-9# ]','') ) AS tot_work_date FROM ( SELECT  a.prev_daily_seq,b.* FROM 	TBL_MONTH_ARRANGE_DETAIL a LEFT OUTER JOIN sp_maxinfo b ON	a.emp_nm = b.EMP_NM AND  a.car_regno = b.CAR_REGNO where 	a.company_no = '100' AND a.BASE_YM = '2023-05' and a.DISPATCH_SEQ = 6 and a.init_seq = 0 AND a.CAR_REGNO LIKE  'SP%' AND a.emp_nm = decode('','',a.emp_nm,'') AND a.route_nm = '38번' ) b ORDER BY b.prev_daily_seq
2023-06-08 23:07:35.390 INFO  [http-nio-10010-exec-6] [c.p.dashboard.service.DynamicSqlService] - properties mtr.query.sql : SELECT 	a.ROUTE_NM,b.STATUS,b.LAST_CHG_USER,b.LAST_CHG_DATE FROM 	TBL_ROUTEINFO a left outer join TBM_MONTH_ARRANGE_STATUS b on	a.company_no = b.company_no and a.route_nm   = b.route_nm AND b.BASE_YM = '2023-05' AND	b.ROUTE_NM like '' || '%' WHERE 	a.company_no = '100' ORDER BY 1
2023-06-08 23:14:38.271 INFO  [MessageBroker-2] [o.s.w.s.c.WebSocketMessageBrokerStats] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 3, active threads = 1, queued tasks = 0, completed tasks = 2]
2023-06-08 23:16:25.295 WARN  [H2 housekeeper] [com.zaxxer.hikari.pool.HikariPool] - H2 - Thread starvation or clock leap detected (housekeeper delta=1m19s124ms90µs500ns).
